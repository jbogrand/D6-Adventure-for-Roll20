<div>
    <div style="position:relative;">
        <div name="header" style="margin-bottom:30px; text-indent:000px; text-align: left; background:rgba(186,31,25,.95); border-radius:13px;">
            <!--<img class="coatofarms" src="https://upload.wikimedia.org/wikipedia/commons/thumb/c/ce/Greater_Coat_of_Arms_of_Joseph_II%2C_Holy_Roman_Emperor.svg/919px-Greater_Coat_of_Arms_of_Joseph_II%2C_Holy_Roman_Emperor.svg.png" width=50px height=60px style="top: 100%; position:relative; margin-top:4px; margin-left:150px; margin-left:25%; margin-right:20%;"/>*/-->
             <img class="sheet-paper" src="http://html.scribd.com/6ifhb0gf7k5uq6wy/images/1-9711188142.jpg"/>
            <img class="sheet-titleimage" src="http://html.scribd.com/6ifhb0gf7k5uq6wy/images/1-9711188142.jpg"/>

             <!--<img class="coatofarms" src="https://upload.wikimedia.org/wikipedia/commons/thumb/c/ce/Greater_Coat_of_Arms_of_Joseph_II%2C_Holy_Roman_Emperor.svg/919px-Greater_Coat_of_Arms_of_Joseph_II%2C_Holy_Roman_Emperor.svg.png" width=50px height=60px style="top: 100%; position:relative; margin-top:4px; margin-left:20%; "/>-->
           
            <p class="sheet-headertitle">--</p>
         <p class="sheet-headertitle">-</p>
            <p class="sheet-headertitle">Personnel File</p>
            <br>
        </div>
    </div>
    
    <table style="margin-bottom:-10px;margin-top:-10px;">
        <tr>
            <th><div style="width: 100px; color:black;">Story</div></th>
            <th><div style="width: 100px; color:black;">Attributes</div></th>
            <th><div style="width: 100px; color:black;">Features</div></th>
            <th><div style="width: 100px; color:black;">Inventory</div></th>
            <th><div style="width: 100px; color:black;">Vehicle</div></th>
            <th><div style="width: 100px; color:black;">Advancement</div></th>
        </tr>
	<tr>
		<th><div style="width:100%; color:black;">-</th>
	</tr>
    </table>  
    <input type="radio" name="attr_tab" class="sheet-tab sheet-tab1" value="1" title="Story" checked="checked" /><span></span>
    <input type="radio" name="attr_tab" class="sheet-tab sheet-tab2" value="2" title="Attributes" /><span></span>
    <input type="radio" name="attr_tab" class="sheet-tab sheet-tab3" value="3" title="Features" /><span></span>
    <input type="radio" name="attr_tab" class="sheet-tab sheet-tab4" value="4" title="Inventory" /><span></span>
    <input type="radio" name="attr_tab" class="sheet-tab sheet-tab5" value="5" title="Vehicle" /><span></span>
    <input type="radio" name="attr_tab" class="sheet-tab sheet-tab6" value="6" title="Advancement" /><span></span>
    <input type="number" class="sheet-attribnumber" style="margin-left:10px;" name="attr_gendice" min="0" value="0"/><div style="color:white;display:inline;">D+</div>
    <input type="number" class="sheet-attribnumber" name="attr_genpip" min="0" value="0"/><input type="checkbox" class="sheet-update" name="attr_gen_update" value="1" checked/><span></span> 
    <!-- Top Bar  -->  
    <table>
        <tr>
            <td><div style="width:200px;">
                    <div class="sheet-injury">
                        <input type="radio" class="sheet-injury sheet-injurya" name="attr_stunned" value="0" checked/>
                        <input type="radio" class="sheet-injury sheet-injuryb" name="attr_stunned" value="1" />
                            <span class="sheet-injury sheet-injurya">Active</span>
                            <span class="sheet-injury sheet-injuryb">Stunned</span>
                    </div>
                </div>    
            </td>
            <td class="sheet-wound_background"><input type="checkbox" class="sheet-injuryup" name="attr_wound_down" value="1"><span></span></td>
            <td class="sheet-wound_background">
                <div class="sheet-injury">
                    <input type="radio" class="sheet-injury sheet-injury0" name="attr_injury" value="0" checked/>
                    <input type="radio" class="sheet-injury sheet-injury1" name="attr_injury" value="1" />
                    <input type="radio" class="sheet-injury sheet-injury2" name="attr_injury" value="2" />
                    <input type="radio" class="sheet-injury sheet-injury3" name="attr_injury" value="3" />
                    <input type="radio" class="sheet-injury sheet-injury4" name="attr_injury" value="4" />
                    <input type="radio" class="sheet-injury sheet-injury5" name="attr_injury" value="5" />
                    <span class="sheet-injury sheet-injury0">Uninjured</span>
                    <span class="sheet-injury sheet-injury1">Wounded</span>
                    <span class="sheet-injury sheet-injury2">Severely Wounded</span>
                    <span class="sheet-injury sheet-injury3">Incapacitated</span>
                    <span class="sheet-injury sheet-injury4">Mortally Wounded</span>
                    <span class="sheet-injury sheet-injury5">Dead</span>
                </div>
            </td>
            <td class="sheet-wound_background"><input type="checkbox" class="sheet-injurydown" name="attr_wound_up" value="1"><span></span></td>
            <td><input type="number" class="sheet-skillnumber" name="attr_numbStuns" value="0"/>/<input type="number" class="sheet-skillnumber" name="attr_numbStuns_max" value="@{Physiquedice}" disabled="true"/></td>
            <td>Total Stuns to Max Unconscious</td>
            
        </tr>
    </table>
    <input type="text" class="sheet-hidden" name="attr_wound_level" value=""/>
    <input type="number" class="sheet-hidden" name="attr_wound_effects" value="0"/>
    <!-- Tab One -->
    <div class="sheet-tab-content sheet-tab1" name="characterbasics">
        <div class='sheet-2colrow'>
            <div class='sheet-col' style="display:inline-block;">
                <table style="margin-top:-10px; margin-left:-10px;">
                    <tr>
                        <td><div class="sheet-slant"><label class="sheet-slant">Character Name</label></div></td><td><input type="text" class="sheet-attribword" name="attr_character_name" style="width:200px;" placeholder=" Character Name"/></td>
                    </tr>
                    <tr>
                        <td><div class="sheet-slant"><label class="sheet-slant">Player Name</label></div></td><td><input type="text" class="sheet-attribword2" name="attr_playername" style="width:200px;"/></td>
                    </tr>
                    <tr>
                        <td><div class="sheet-slant"><label class="sheet-slant">Occupation</label></div></td><td><input type="text" class="sheet-attribword2" name="attr_occupation" style="width:200px;"/></td>
                    </tr>
                </table>
            </div>
            <div class='sheet-col'>
                <div class="sheet-slant"><label class="sheet-slant">Physical Description</label></div><textarea name="attr_physicaldescription" class="sheet-textarea" style="width:390px;"></textarea>
    
                <table style="margin-top:-10px; margin-left:-10px;">
                    <tr>
                        <td>
                            <div class="sheet-slant"><label class="sheet-slant">Gender</label></div><input type="text" class="sheet-skillword" name="attr_gender" style="width:80px;"/>
                        </td>
                        <td>
                            <div class="sheet-slant"><label class="sheet-slant">Age</label></div><input type="text" class="sheet-skillword" name="attr_age" style="width:80px;"/>
                        </td>
                        <td>
                            <div class="sheet-slant"><label class="sheet-slant">Height</label></div><input type="text" class="sheet-skillword" name="attr_height" style="width:80px;"/>
                        </td>
                        <td>
                            <div class="sheet-slant"><label class="sheet-slant">Weight</label></div><input type="text" class="sheet-skillword" name="attr_weight" style="width:80px;"/>
                        </td>
                    </tr>
                </table>
            </div>
        </div>
        <div class='sheet-2colrow'>
            <div class='sheet-col'>
                <div>
                    <div class="sheet-slant" style="width:150px;"><label class="sheet-slant">Personality</label></div>
                    <textarea name="attr_personality" class="sheet-textarea" style="width:390px;"></textarea>
                </div>
                <div>
                    <div class="sheet-slant" style="width:150px;"><label class="sheet-slant">Objectives</label></div>
                    <textarea name="attr_objectives" class="sheet-textarea" style="width:390px;"></textarea>
                </div>
            </div>
            <div class='sheet-col'>
                <div>
                    <div class="sheet-slant" style="width:150px;"><label class="sheet-slant">Native Language</label></div>
                    <textarea name="attr_natlanguage" class="sheet-textarea" style="width:390px;"></textarea>
                </div>
                <div>
                    <div class="sheet-slant" style="width:150px;"><label class="sheet-slant">Other Information</label></div>
                    <textarea name="attr_otherinfo" class="sheet-textarea" style="width:390px;"></textarea>
                </div>
            </div>
        </div>
       <!--  <div class='sheet-2colrow'>
            <div class='sheet-col'>
                <div class="sheet-slant" style="width:150px;"><label class="sheet-slant">Message</label></div>
                <table>
                    <tr>
                        <td><button type="roll" class="sheet-msgbtn" name="attr_message_send" style="display:inline" value="&{template:msg} {{character= @{receiver}}} {{msg= @{message} }}"></button></td>
                        <td><h5>From:</h5><input type="text" class="sheet-skillword2" name="attr_receiver" value="" style="display:inline;width:328px" /><br></td>
                    </tr>
                    <tr>
                        <td colspan="2"><textarea name="attr_message" class="sheet-textarea"style="width:390px" placeholder="Message"></textarea></td>
                    </tr>
                </table>
            </div>
            <div class='sheet-col'>
                <div class="sheet-slant" style="width:150px;"><label class="sheet-slant">GM Message</label></div>
                <table>
                    <tr>
                        <td><button type="roll" class="sheet-msgbtn" name="attr_dmmessage_send" style="display:inline" value="&{template:dscreen} {{screen= @{screen}}} {{story= @{dm_message} }}"></button></td>
                        <td><h5>Screen:</h5><input type="text" class="sheet-skillword2" name="attr_screen" value="" style="display:inline;width:328px" /><br></td>
                    </tr>
                    <tr>
                        <td colspan="2"><textarea name="attr_dm_message" class="sheet-textarea" style="width:390px" placeholder="Message"></textarea></td>
                    </tr>
                </table>
            </div>
        </div>-->
        <div class='sheet-2colrow'>
            <div class='sheet-col'>
                <div class="sheet-slant" style="width:150px;"><label class="sheet-slant">Notes I</label></div>
                <textarea name="attr_AdditionalNotes" class="sheet-textarea" style="width:390px;height:155px; padding-top:2px; padding-bottom:2px;" ></textarea>
            </div>
            <div class='sheet-col'>
                <div class="sheet-slant" style="width:150px;"><label class="sheet-slant">Notes II</label></div>
                <textarea name="attr_AdditionalNotes2" class="sheet-textarea" style="width:390px;height:155px; padding-top:2px; padding-bottom:2px;" ></textarea>
            </div>
        </div>
    </div>
    <!-- Tab Two -->
    <div class="sheet-tab-content sheet-tab2" name="attributes_and_skills">
        <div class='sheet-2colrow'>
            <div class='sheet-col'>
                <div name="Reflexes"> 
                    <table class="sheet-dark">
                        <tr>
                            <td><div style="width:100px;"><button type='roll' class="sheet-button" name="roll_Reflexes" value='&{template:attrib} {{stat= Reflexes}} {{character= @{character_name}}} {{wound= @{wound_level} (@{wound_effects}) }} {{roll= [[(@{Reflexesdice} + @{Reflexesdice-mod} + @{wound_effects} + @{gendice} - 1)d6 + 1d6! + @{Reflexespip} + @{Reflexespip-mod} + @{genpip}]] }}' >Reflexes</button></div></td>
                            <td><input type="number" class="sheet-attribnumber" name="attr_Reflexesdice" min="1" value="3"/>D </td>
                            <td>+<input type="number" class="sheet-attribnumber" name="attr_Reflexespip" min="0" max="2" value="0"/></td>
                            <td>
                                <input type="number" class="sheet-skillnumber2" name="attr_Reflexesdice-mod" min="0" value="0"/>D+
                                <input type="number" class="sheet-skillnumber2" name="attr_Reflexespip-mod" min="0" max="2" value="0"/>
                            </td>
                            <td><input type="checkbox" class="sheet-gear" name="attr_Reflexes_open" value="1" checked/><span></span> </td>
                        </tr>
                    </table>
                    <input type="checkbox" class="sheet-hider sheet-hidden" name="attr_Reflexes_open" value="1" checked/><span></span>
                    <div class="sheet-hold">
                        <table class="sheet-attribute_skill" style="border-collapse: collapse;">
                            <tr>
                                <td></td>
                                <td colspan="3"><input type="checkbox" class="sheet-skillbase" name="attr_Reflexes_update" value="1" checked/><span></span> </td>
                            </tr>
                            <tr>
                                <td>Roll</td>
                                <td>Skill</td>
                                <td>Dice</td>
                                <td>Pips</td>
                                <td class="sheet-center">Mod</td>
                            </tr>
                            <tr>
                                <td><button type="roll" class="sheet-button2" name="roll_Acrobatics" value='&{template:attrib} {{stat= Reflexes:Acrobatics}} {{character= @{character_name}}} {{wound= @{wound_level} (@{wound_effects}) }} {{roll= [[(@{acrobaticsdice} + @{acrobaticsdice-mod} + @{wound_effects} + @{gendice} - 1)d6 + 1d6! + @{acrobaticspip} + @{acrobaticspip-mod} + @{genpip}]] }}'></button></td>
                                <td><input type="text" class="sheet-skillword" name="attr_acrobatics_name" value="Acrobatics" readonly/></td>
                                <td><input type="number" class="sheet-skillnumber" name="attr_acrobaticsdice" min="1" value="3"/>D </td>
                                <td>+<input type="number" class="sheet-skillnumber" name="attr_acrobaticspip" min="0" max="2" value="0"/></td>
                                <td>
                                    <input type="number" class="sheet-skillnumber2" name="attr_acrobaticsdice-mod" min="0" value="0"/>D+
                                    <input type="number" class="sheet-skillnumber2" name="attr_acrobaticspip-mod" min="0" max="2" value="0"/>
                                </td>
                                <td><input type="checkbox" class="sheet-update" name="attr_acrobatics_update" value="1" checked/><span></span></td>
                            </tr>
                            <tr>
                                <td><button type="roll" class="sheet-button2" name="roll_Brawling" value='&{template:attrib} {{stat= Reflexes:Brawling}} {{character= @{character_name}}} {{wound= @{wound_level} (@{wound_effects}) }} {{roll= [[(@{brawlingdice} + @{brawlingdice-mod} + @{wound_effects} + @{gendice} - 1)d6 + 1d6! + @{brawlingpip} + @{brawlingpip-mod} + @{genpip}]] }}'></button></td>
                                <td><input type="text" class="sheet-skillword" name="attr_brawling_name" value="Brawling" readonly/></td>
                                <td><input type="number" class="sheet-skillnumber" name="attr_brawlingdice" min="1" value="3"/>D </td>
                                <td>+<input type="number" class="sheet-skillnumber" name="attr_brawlingpip" min="0" max="2" value="0"/></td>
                                <td>
                                    <input type="number" class="sheet-skillnumber2" name="attr_brawlingdice-mod" min="0" value="0"/>D+
                                    <input type="number" class="sheet-skillnumber2" name="attr_brawlingpip-mod" min="0" max="2" value="0"/>
                                </td>
                                <td><input type="checkbox" class="sheet-update" name="attr_brawling_update" value="1" checked/><span></span> </td>
                            </tr>
                            <tr>
                                <td><button type="roll" class="sheet-button2" name="roll_Dodge" value='&{template:attrib} {{stat= Reflexes:Dodge}} {{character= @{character_name}}} {{wound= @{wound_level} (@{wound_effects}) }} {{roll= [[(@{dodgedice} + @{dodgedice-mod} + @{wound_effects} + @{gendice} - 1)d6 + 1d6! + @{dodgepip} + @{dodgepip-mod} + @{genpip}]] }}'></button></td>
                                <td><input type="text" class="sheet-skillword" name="attr_dodge_name" value="Dodge" readonly/></td>
                                <td><input type="number" class="sheet-skillnumber" name="attr_dodgedice" min="1" value="3"/>D </td>
                                <td>+<input type="number" class="sheet-skillnumber" name="attr_dodgepip" min="0" max="2" value="0"/></td>
                                <td>
                                    <input type="number" class="sheet-skillnumber2" name="attr_dodgedice-mod" min="0" value="0"/>D+
                                    <input type="number" class="sheet-skillnumber2" name="attr_dodgepip-mod" min="0" max="2" value="0"/>
                                </td>
                                <td><input type="checkbox" class="sheet-update" name="attr_dodge_update" value="1" checked/><span></span> </td>
                            </tr>

                            <tr>
                                <td><button type="roll" class="sheet-button2" name="roll_Flying" value='&{template:attrib} {{stat= Reflexes:Flying/Zero G}} {{character= @{character_name}}} {{wound= @{wound_level} (@{wound_effects}) }} {{roll= [[(@{flyingdice} + @{flyingdice-mod} + @{wound_effects} + @{gendice} - 1)d6 + 1d6! + @{flyingpip} + @{flyingpip-mod} + @{genpip}]] }}'></button></td>
                                <td><input type="text" class="sheet-skillword" name="attr_flying_name" value="Flying/Zero G" readonly/></td>
                                <td><input type="number" class="sheet-skillnumber" name="attr_flyingdice" min="1" value="3"/>D </td>
                                <td>+<input type="number" class="sheet-skillnumber" name="attr_flyingpip" min="0" max="2" value="0"/></td>
                                <td>
                                    <input type="number" class="sheet-skillnumber2" name="attr_flyingdice-mod" min="0" value="0"/>D+
                                    <input type="number" class="sheet-skillnumber2" name="attr_flyingpip-mod" min="0" max="2" value="0"/>
                                </td>
                                <td><input type="checkbox" class="sheet-update" name="attr_flying_update" value="1" checked/><span></span> </td>
                            </tr>
                            <tr>
                                <td><button type="roll" class="sheet-button2" name="roll_Melee" value='&{template:attrib} {{stat= Reflexes:Melee}} {{character= @{character_name}}} {{wound= @{wound_level} (@{wound_effects}) }} {{roll= [[(@{meleedice} + @{meleedice-mod} + @{wound_effects} + @{gendice} - 1)d6 + 1d6! + @{meleepip} + @{meleepip-mod} + @{genpip}]] }}'></button></td>
                                <td><input type="text" class="sheet-skillword" name="attr_melee_name" value="Melee" readonly/></td>
                                <td><input type="number" class="sheet-skillnumber" name="attr_meleedice" min="1" value="3"/>D </td>
                                <td>+<input type="number" class="sheet-skillnumber" name="attr_meleepip" min="0" max="2" value="0"/></td>
                                <td>
                                    <input type="number" class="sheet-skillnumber2" name="attr_meleedice-mod" min="0" value="0"/>D+
                                    <input type="number" class="sheet-skillnumber2" name="attr_meleepip-mod" min="0" max="2" value="0"/>
                                </td>
                                <td><input type="checkbox" class="sheet-update" name="attr_melee_update" value="1" checked/><span></span> </td>
                            </tr>

                            <tr>
                                <td><button type="roll" class="sheet-button2" name="roll_Riding" value='&{template:attrib} {{stat= Reflexes:Riding}} {{character= @{character_name}}} {{wound= @{wound_level} (@{wound_effects}) }} {{roll= [[(@{ridingdice} + @{ridingdice-mod} + @{wound_effects} + @{gendice} - 1)d6 + 1d6! + @{ridingpip} + @{ridingpip-mod} + @{genpip}]] }}'></button></td>
                                <td><input type="text" class="sheet-skillword" name="attr_riding_name" value="Riding" readonly/></td>
                                <td><input type="number" class="sheet-skillnumber" name="attr_ridingdice" min="1" value="3"/>D </td>
                                <td>+<input type="number" class="sheet-skillnumber" name="attr_ridingpip" min="0" max="2" value="0"/></td>
                                <td>
                                    <input type="number" class="sheet-skillnumber2" name="attr_ridingdice-mod" min="0" value="0"/>D+
                                    <input type="number" class="sheet-skillnumber2" name="attr_ridingpip-mod" min="0" max="2" value="0"/>
                                </td>
                                <td><input type="checkbox" class="sheet-update" name="attr_riding_update" value="1" checked/><span></span> </td>
                            </tr>

                            <tr>
                                <td><button type="roll" name="roll_sneak" class="sheet-button2" value='&{template:attrib} {{stat= Reflexes:Sneak}} {{character= @{character_name}}} {{wound= @{wound_level} (@{wound_effects}) }} {{roll= [[(@{sneakdice} + @{sneakdice-mod} + @{wound_effects} + @{gendice} - 1)d6 + 1d6! + @{sneakpip} + @{sneakpip-mod} + @{genpip}]] }}'></button></td>
                                <td><input type="text" class="sheet-skillword" name="attr_sneak_name" value="Sneak" readonly/></td>
                                <td><input type="number" class="sheet-skillnumber" name="attr_sneakdice" min="1" value="3"/>D </td>
                                <td>+<input type="number" class="sheet-skillnumber" name="attr_sneakpip" min="0" max="2" value="0"/></td>
                                <td>
                                    <input type="number" class="sheet-skillnumber2" name="attr_sneakdice-mod" min="0" value="0"/>D+
                                    <input type="number" class="sheet-skillnumber2" name="attr_sneakpip-mod" min="0" max="2" value="0"/>
                                </td>
                                <td><input type="checkbox" class="sheet-update" name="attr_sneak_update" value="1" checked/><span></span> </td>
                            </tr>
                        </table>
                        <fieldset class="repeating_Reflexesskills">
                            <table class="sheet-attribute_skill" style="border-collapse: collapse;">
                                <tr>
                                    <td><button type="roll" class="sheet-button2" name="roll_agilskill" value='&{template:attrib} {{stat= Reflexes:@{agilskillname} }} {{character= @{character_name}}} {{wound= @{wound_level} (@{wound_effects}) }} {{roll= [[(@{agilskilldice} + @{agilskilldice-mod} + @{wound_effects} + @{gendice} - 1)d6 + 1d6! + @{agilskillpip} + @{agilskillpip-mod} + @{genpip}]] }}'></button></td>
                                    <td><input type="text" class="sheet-skillword" name="attr_agilskillname" placeholder="Skill Name"/></td>
                                    <td><input type="number" class="sheet-skillnumber" name="attr_agilskilldice" min="1" value="3"/>D </td>
                                    <td>+<input type="number" class="sheet-skillnumber" name="attr_agilskillpip" min="0" max="2" value="0"/></td>
                                    <td>
                                        <input type="number" class="sheet-skillnumber2" name="attr_agilskilldice-mod" min="0" value="0"/>D+
                                        <input type="number" class="sheet-skillnumber2" name="attr_agilskillpip-mod" min="0" max="2" value="0"/>
                                    </td>
                                    <td><input type="checkbox" class="sheet-update" name="attr_agilskill_update" value="1" checked/><span></span> </td>
                                </tr>
                            </table>
                        </fieldset>
                    </div>
                </div>
            </div>
            <div class='sheet-col'>
                <div name="Physique">
                    <table class="sheet-attribute_skill">
                        <tr>
                            <td><div style="width:100px;"><button type='roll' name="roll_Physique" class="sheet-button" value='&{template:attrib} {{stat= Physique}} {{character= @{character_name}}} {{wound= @{wound_level} (@{wound_effects}) }} {{roll= [[(@{Physiquedice} + @{Physiquedice-mod} + @{wound_effects} + @{gendice} - 1)d6 + 1d6! + @{Physiquepip} + @{Physiquepip-mod} + @{genpip}]] }}' >Physique</button></div></td>
                            <td><input type="number" class="sheet-attribnumber" name="attr_Physiquedice" min="1" value="3"/>D </td>
                            <td>+<input type="number" class="sheet-attribnumber" name="attr_Physiquepip" min="0" max="2" value="0"/></td>
                            <td>
                                <input type="number" class="sheet-skillnumber2" name="attr_Physiquedice-mod" min="0" value="0"/>D+
                                <input type="number" class="sheet-skillnumber2" name="attr_Physiquepip-mod" min="0" max="2" value="0"/>
                            </td>
                            <td><input type="checkbox" class="sheet-gear" name="attr_Physique_open" value="1" checked/><span></span> </td>
                        </tr>
                    </table>
                    <input type="checkbox" class="sheet-hider sheet-hidden" name="attr_Physique_open" value="1" checked/><span></span>
                    <div class="sheet-hold">
                        <table class="sheet-attribute_skill" style="border-collapse: collapse;">
                            <tr>
                                <td></td>
                                <td colspan="3"><input type="checkbox" class="sheet-skillbase" name="attr_Physique_update" value="1" checked/><span></span> </td>
                            </tr>
                            <tr>
                                <td>Roll</td>
                                <td>Skill</td>
                                <td>Dice</td>
                                <td>Pips</td>
                                <td class="sheet-center">Mod</td>
                            </tr>
                            <tr>
                                <td><button type="roll" name="roll_climb" class="sheet-button2" value='&{template:attrib} {{stat= Physique:Climb}} {{character= @{character_name}}} {{wound= @{wound_level} (@{wound_effects}) }} {{roll= [[(@{climbdice} + @{climbdice-mod} + @{wound_effects} + @{gendice} - 1)d6 + 1d6! + @{climbpip} + @{climbpip-mod} + @{genpip}]] }}'></button></td>
                                <td><input type="text" class="sheet-skillword" name="attr_climb_name" value="Climb" readonly/></td>
                                <td><input type="number" class="sheet-skillnumber" name="attr_climbdice" min="1" value="3"/>D </td>
                                <td>+<input type="number" class="sheet-skillnumber" name="attr_climbpip" min="0" max="2" value="0"/></td>
                                <td>
                                    <input type="number" class="sheet-skillnumber2" name="attr_climbdice-mod" min="0" value="0"/>D+
                                    <input type="number" class="sheet-skillnumber2" name="attr_climbpip-mod" min="0" max="2" value="0"/>
                                </td>
                                <td><input type="checkbox" class="sheet-update" name="attr_climb_update" value="1" checked/><span></span></td>
                            </tr>
                            <tr>
                                <td><button type="roll" name="roll_lift" class="sheet-button2" value='&{template:attrib} {{stat= Physique:Lift}} {{character= @{character_name}}} {{wound= @{wound_level} (@{wound_effects}) }} {{roll= [[(@{liftdice} + @{liftdice-mod} + @{wound_effects} + @{gendice} - 1)d6 + 1d6! + @{liftpip} + @{liftpip-mod} + @{genpip}]] }}'></button></td>
                                <td><input type="text" class="sheet-skillword" name="attr_lift_name" value="Lift" readonly/></td>
                                <td><input type="number" class="sheet-skillnumber" name="attr_liftdice" min="1" value="3"/>D </td>
                                <td>+<input type="number" class="sheet-skillnumber" name="attr_liftpip" min="0" max="2" value="0"/></td>
                                <td>
                                    <input type="number" class="sheet-skillnumber2" name="attr_liftdice-mod" min="0" value="0"/>D+
                                    <input type="number" class="sheet-skillnumber2" name="attr_liftpip-mod" min="0" max="2" value="0"/>
                                </td>
                                <td><input type="checkbox" class="sheet-update" name="attr_lift_update" value="1" checked/><span></span></td>
                            </tr>
                            <tr>
                                <td><button type="roll" name="roll_running" class="sheet-button2" value='&{template:attrib} {{stat= Physique:Running}} {{character= @{character_name}}} {{wound= @{wound_level} (@{wound_effects}) }} {{roll= [[(@{runningdice} + @{runningdice-mod} + @{wound_effects} + @{gendice} - 1)d6 + 1d6! + @{runningpip} + @{runningpip-mod} + @{genpip}]] }}'></button></td>
                                <td><input type="text" class="sheet-skillword" name="attr_running_name" value="Running" readonly/></td>
                                <td><input type="number" class="sheet-skillnumber" name="attr_runningdice" min="1" value="3"/>D </td>
                                <td>+<input type="number" class="sheet-skillnumber" name="attr_runningpip" min="0" max="2" value="0"/></td>
                                <td>
                                    <input type="number" class="sheet-skillnumber2" name="attr_runningdice-mod" min="0" value="0"/>D+
                                    <input type="number" class="sheet-skillnumber2" name="attr_runningpip-mod" min="0" max="2" value="0"/>
                                </td>
                                <td><input type="checkbox" class="sheet-update" name="attr_running_update" value="1" checked/><span></span></td>
                            </tr>
                            <tr>
                                <td><button type="roll" name="roll_stamina" class="sheet-button2" value='&{template:attrib} {{stat= Physique:Stamina}} {{character= @{character_name}}} {{wound= @{wound_level} (@{wound_effects}) }} {{roll= [[(@{staminadice} + @{staminadice-mod} + @{wound_effects} + @{gendice} - 1)d6 + 1d6! + @{staminapip} + @{staminapip-mod} + @{genpip}]] }}'></button></td>
                                <td><input type="text" class="sheet-skillword" name="attr_stamina_name" value="Stamina" readonly/></td>
                                <td><input type="number" class="sheet-skillnumber" name="attr_staminadice" min="1" value="3"/>D </td>
                                <td>+<input type="number" class="sheet-skillnumber" name="attr_staminapip" min="0" max="2" value="0"/></td>
                                <td>
                                    <input type="number" class="sheet-skillnumber2" name="attr_staminadice-mod" min="0" value="0"/>D+
                                    <input type="number" class="sheet-skillnumber2" name="attr_staminapip-mod" min="0" max="2" value="0"/>
                                </td>
                                <td><input type="checkbox" class="sheet-update" name="attr_stamina_update" value="1" checked/><span></span></td>
                            </tr>
                            <tr>
                                <td><button type="roll" name="roll_swim" class="sheet-button2" value='&{template:attrib} {{stat= Physique:Swim}} {{character= @{character_name}}} {{wound= @{wound_level} (@{wound_effects}) }} {{roll= [[(@{swimdice} + @{swimdice-mod} + @{wound_effects} + @{gendice} - 1)d6 + 1d6! + @{swimpip} + @{swimpip-mod} + @{genpip}]] }}'></button></td>
                                <td><input type="text" class="sheet-skillword" name="attr_swim_name" value="Swim" readonly/></td>
                                <td><input type="number" class="sheet-skillnumber" name="attr_swimdice" min="1" value="3"/>D </td>
                                <td>+<input type="number" class="sheet-skillnumber" name="attr_swimpip" min="0" max="2" value="0"/></td>
                                <td>
                                    <input type="number" class="sheet-skillnumber2" name="attr_swimdice-mod" min="0" value="0"/>D+
                                    <input type="number" class="sheet-skillnumber2" name="attr_swimpip-mod" min="0" max="2" value="0"/>
                                </td>
                                <td><input type="checkbox" class="sheet-update" name="attr_swim_update" value="1" checked/><span></span></td>
                            </tr>
                        </table>
                        </table>
                        <fieldset class="repeating_Physiqueskills">
                            <table class="sheet-attribute_skill" style="border-collapse: collapse;">
                                <tr>
                                    <td><button type="roll" class="sheet-button2" value='&{template:attrib} {{stat= Physique:@{strskillname} }} {{character= @{character_name}}} {{wound= @{wound_level} (@{wound_effects}) }} {{roll= [[(@{strskilldice} + @{strskilldice-mod} + @{wound_effects} + @{gendice} - 1)d6 + 1d6! + @{strskillpip} + @{strskillpip-mod} + @{genpip}]] }}'></button></td>
                                    <td><input type="text" class="sheet-skillword" name="attr_strskillname" placeholder="Skill Name"/></td>
                                    <td><input type="number" class="sheet-skillnumber" name="attr_strskilldice" min="1" value="3"/>D </td>
                                    <td>+<input type="number" class="sheet-skillnumber" name="attr_strskillpip" min="0" max="2" value="0"/></td>
                                <td>
                                    <input type="number" class="sheet-skillnumber2" name="attr_strskilldice-mod" min="0" value="0"/>D+
                                    <input type="number" class="sheet-skillnumber2" name="attr_strskillpip-mod" min="0" max="2" value="0"/>
                                </td>
                                <td><input type="checkbox" class="sheet-update" name="attr_strskill_update" value="1" checked/><span></span></td>
                                </tr>
                            </table>
                        </fieldset>
                    </div>
                </div>
            </div>
        </div>
        <div class='sheet-2colrow'>
            <div class='sheet-col'>
                <div name="Perception">
                    <table class="sheet-dark">
                        <tr>
                            <td><div style="width:100px;"><button type='roll' name="roll_perception" class="sheet-button" value='&{template:attrib} {{stat= Perception}} {{character= @{character_name}}} {{wound= @{wound_level} (@{wound_effects}) }} {{roll= [[(@{perceptiondice} + @{wound_effects} + @{perceptiondice-mod} + @{gendice} - 1)d6 + 1d6! + @{perceptionpip} + @{perceptionpip-mod} + @{genpip}]] }}' >Perception</button></div></td>
                            <td><input type="number" class="sheet-attribnumber" name="attr_perceptiondice" min="1" value="3"/>D </td>
                            <td>+<input type="number" class="sheet-attribnumber" name="attr_perceptionpip" min="0" max="2" value="0"/></td>
                            <td>
                                <input type="number" class="sheet-skillnumber2" name="attr_perceptiondice-mod" min="0" value="0"/>D+
                                <input type="number" class="sheet-skillnumber2" name="attr_perceptionpip-mod" min="0" max="2" value="0"/>
                            </td>
                            <td><input type="checkbox" class="sheet-gear" name="attr_perception_open" value="1" checked/><span></span> </td>
                        </tr>
                    </table>
                    <input type="checkbox" class="sheet-hider sheet-hidden" name="attr_perception_open" value="1" checked/><span></span>
                    <div class="sheet-hold">
                        <table class="sheet-attribute_skill" style="border-collapse: collapse;">
                            <tr>
                                <td></td>
                                <td colspan="3"><input type="checkbox" class="sheet-skillbase" name="attr_perception_update" value="1" checked/><span></span> </td>
                            </tr>
                            <tr>
                                <td>Roll</td>
                                <td>Skill</td>
                                <td>Dice</td>
                                <td>Pips</td>
                                <td class="sheet-center">Mod</td>
                            </tr>
                            <tr>
                                <td><button type="roll" name="roll_artist" class="sheet-button2" value='&{template:attrib} {{stat= Perception:Artist}} {{character= @{character_name}}} {{wound= @{wound_level} (@{wound_effects}) }} {{roll= [[(@{artistdice} + @{artistdice-mod} + @{wound_effects} + @{gendice}  - 1)d6 + 1d6! + @{artistpip} + @{artistpip-mod} + @{genpip}]] }}'></button></td>
                                <td><input type="text" class="sheet-skillword" name="attr_artist_name" value="Artist" readonly/></td>
                                <td><input type="number" class="sheet-skillnumber" name="attr_artistdice" min="1" value="3"/>D </td>
                                <td>+<input type="number" class="sheet-skillnumber" name="attr_artistpip" min="0" max="2" value="0"/></td>
                                <td>
                                    <input type="number" class="sheet-skillnumber2" name="attr_artistdice-mod" min="0" value="0"/>D+
                                    <input type="number" class="sheet-skillnumber2" name="attr_artistpip-mod" min="0" max="2" value="0"/>
                                </td>
                                <td><input type="checkbox" class="sheet-update" name="attr_artist_update" value="1" checked/><span></span> </td>
                            </tr>

 
                            

                            <tr>
                                <td><button type="roll" name="roll_gambling" class="sheet-button2" value='&{template:attrib} {{stat= Perception:Gambling}} {{character= @{character_name}}} {{wound= @{wound_level} (@{wound_effects}) }} {{roll= [[(@{gamblingdice} + @{gamblingdice-mod} + @{wound_effects} + @{gendice} - 1)d6 + 1d6! + @{gamblingpip} + @{gamblingpip-mod} + @{genpip}]] }}'></button></td>
                                <td><input type="text" class="sheet-skillword" name="attr_gambling_name" value="Gambling" readonly/></td>
                                <td><input type="number" class="sheet-skillnumber" name="attr_gamblingdice" min="1" value="3"/>D </td>
                                <td>+<input type="number" class="sheet-skillnumber" name="attr_gamblingpip" min="0" max="2" value="0"/></td>
                                <td>
                                    <input type="number" class="sheet-skillnumber2" name="attr_gamblingdice-mod" min="0" value="0"/>D+
                                    <input type="number" class="sheet-skillnumber2" name="attr_gamblingpip-mod" min="0" max="2" value="0"/>
                                </td>
                                <td><input type="checkbox" class="sheet-update" name="attr_gambling_update" value="1" checked/><span></span> </td>
                            </tr>
                            <tr>
                                <td><button type="roll" name="roll_hide" class="sheet-button2" value='&{template:attrib} {{stat= Perception:Hide}} {{character= @{character_name}}} {{wound= @{wound_level} (@{wound_effects}) }} {{roll= [[(@{hidedice} + @{hidedice-mod} + @{wound_effects} + @{gendice} - 1)d6 + 1d6! + @{hidepip} + @{hidepip-mod} + @{genpip}]] }}'></button></td>
                                <td><input type="text" class="sheet-skillword" name="attr_hide_name" value="Hide" readonly/></td>
                                <td><input type="number" class="sheet-skillnumber" name="attr_hidedice" min="1" value="3"/>D </td>
                                <td>+<input type="number" class="sheet-skillnumber" name="attr_hidepip" min="0" max="2" value="0"/></td>
                                <td>
                                    <input type="number" class="sheet-skillnumber2" name="attr_hidedice-mod" min="0" value="0"/>D+
                                    <input type="number" class="sheet-skillnumber2" name="attr_hidepip-mod" min="0" max="2" value="0"/>
                                </td>
                                <td><input type="checkbox" class="sheet-update" name="attr_hide_update" value="1" checked/><span></span> </td>
                            </tr>
                            <tr>
                                <td><button type="roll" name="roll_investigation" class="sheet-button2" value='&{template:attrib} {{stat= Perception:Investigation}} {{character= @{character_name}}} {{wound= @{wound_level} (@{wound_effects}) }} {{roll= [[(@{investigationdice} + @{investigationdice-mod} + @{gendice} + @{wound_effects}  - 1)d6 + 1d6! + @{investigationpip} + @{investigationpip-mod} + @{genpip}]] }}'></button></td>
                                <td><input type="text" class="sheet-skillword" name="attr_investigation_name" value="Investigation" readonly/></td>
                                <td><input type="number" class="sheet-skillnumber" name="attr_investigationdice" min="1" value="3"/>D </td>
                                <td>+<input type="number" class="sheet-skillnumber" name="attr_investigationpip" min="0" max="2" value="0"/></td>
                                <td>
                                    <input type="number" class="sheet-skillnumber2" name="attr_investigationdice-mod" min="0" value="0"/>D+
                                    <input type="number" class="sheet-skillnumber2" name="attr_investigationpip-mod" min="0" max="2" value="0"/>
                                </td>
                                <td><input type="checkbox" class="sheet-update" name="attr_investigation_update" value="1" checked/><span></span> </td>
                            </tr>


                            <tr>
                                <td><button type="roll" name="roll_Repair" class="sheet-button2" value='&{template:attrib} {{stat= Perception:Repair}} {{character= @{character_name}}} {{wound= @{wound_level} (@{wound_effects}) }} {{roll= [[(@{Repairdice} + @{Repairdice-mod} + @{gendice} + @{wound_effects}  - 1)d6 + 1d6! + @{Repairpip} + @{Repairpip-mod} + @{genpip}]] }}'></button></td>
                                <td><input type="text" class="sheet-skillword" name="attr_Repair_name" value="Repair" readonly/></td>
                                <td><input type="number" class="sheet-skillnumber" name="attr_Repairdice" min="1" value="3"/>D </td>
                                <td>+<input type="number" class="sheet-skillnumber" name="attr_Repairpip" min="0" max="2" value="0"/></td>
                                <td>
                                    <input type="number" class="sheet-skillnumber2" name="attr_Repairdice-mod" min="0" value="0"/>D+
                                    <input type="number" class="sheet-skillnumber2" name="attr_Repairpip-mod" min="0" max="2" value="0"/>
                                </td>
                                <td><input type="checkbox" class="sheet-update" name="attr_Repair_update" value="1" checked/><span></span> </td>
                            </tr>

                            <tr>
                                <td><button type="roll" name="roll_search" class="sheet-button2" value='&{template:attrib} {{stat= Perception:Search}} {{character= @{character_name}}} {{wound= @{wound_level} (@{wound_effects}) }} {{roll= [[(@{searchdice} + @{searchdice-mod} + @{wound_effects} + @{gendice} - 1)d6 + 1d6! + @{searchpip} + @{searchpip-mod} + @{genpip}]] }}'></button></td>
                                <td><input type="text" class="sheet-skillword" name="attr_search_name" value="Search" readonly/></td>
                                <td><input type="number" class="sheet-skillnumber" name="attr_searchdice" min="1" value="3"/>D </td>
                                <td>+<input type="number" class="sheet-skillnumber" name="attr_searchpip" min="0" max="2" value="0"/></td>
                                <td>
                                    <input type="number" class="sheet-skillnumber2" name="attr_searchdice-mod" min="0" value="0"/>D+
                                    <input type="number" class="sheet-skillnumber2" name="attr_searchpip-mod" min="0" max="2" value="0"/>
                                </td>
                                <td><input type="checkbox" class="sheet-update" name="attr_search_update" value="1" checked/><span></span> </td>
                            </tr>
                            <tr>
                                <td><button type="roll" name="roll_streetwise" class="sheet-button2" value='&{template:attrib} {{stat= Perception:Streetwise}} {{character= @{character_name}}} {{wound= @{wound_level} (@{wound_effects}) }} {{roll= [[(@{streetwisedice} + @{streetwisedice-mod} + @{wound_effects} + @{gendice} - 1)d6 + 1d6! + @{streetwisepip} + @{streetwisepip-mod} + @{genpip}]] }}'></button></td>
                                <td><input type="text" class="sheet-skillword" name="attr_streetwise_name" value="Streetwise" readonly/></td>
                                <td><input type="number" class="sheet-skillnumber" name="attr_streetwisedice" min="1" value="3"/>D </td>
                                <td>+<input type="number" class="sheet-skillnumber" name="attr_streetwisepip" min="0" max="2" value="0"/></td>
                                <td>
                                    <input type="number" class="sheet-skillnumber2" name="attr_streetwisedice-mod" min="0" value="0"/>D+
                                    <input type="number" class="sheet-skillnumber2" name="attr_streetwisepip-mod" min="0" max="2" value="0"/>
                                </td>
                                <td><input type="checkbox" class="sheet-update" name="attr_streetwise_update" value="1" checked/><span></span> </td>
                            </tr>                            
			   <tr>
                                <td><button type="roll" name="roll_survival" class="sheet-button2" value='&{template:attrib} {{stat= Perception:Survival}} {{character= @{character_name}}} {{wound= @{wound_level} (@{wound_effects}) }} {{roll= [[(@{survivaldice} + @{survivaldice-mod} + @{wound_effects} + @{gendice} - 1)d6 + 1d6! + @{survivalpip} + @{survivalpip-mod} + @{genpip}]] }}'></button></td>
                                <td><input type="text" class="sheet-skillword" name="attr_survival_name" value="Survival" readonly/></td>
                                <td><input type="number" class="sheet-skillnumber" name="attr_survivaldice" min="1" value="3"/>D </td>
                                <td>+<input type="number" class="sheet-skillnumber" name="attr_survivalpip" min="0" max="2" value="0"/></td>
                                <td>
                                    <input type="number" class="sheet-skillnumber2" name="attr_survivaldice-mod" min="0" value="0"/>D+
                                    <input type="number" class="sheet-skillnumber2" name="attr_survivalpip-mod" min="0" max="2" value="0"/>
                                </td>
                                <td><input type="checkbox" class="sheet-update" name="attr_survival_update" value="1" checked/><span></span> </td>
                            </tr>  
                          
                             <tr>
                                <td><button type="roll" name="roll_Tracking" class="sheet-button2" value='&{template:attrib} {{stat= Perception:Tracking}} {{character= @{character_name}}} {{wound= @{wound_level} (@{wound_effects}) }} {{roll= [[(@{Trackingdice} + @{Trackingdice-mod} + @{wound_effects} + @{gendice} - 1)d6 + 1d6! + @{Trackingpip} + @{Trackingpip-mod} + @{genpip}]] }}'></button></td>
                                <td><input type="text" class="sheet-skillword" name="attr_Tracking_name" value="Tracking" readonly/></td>
                                <td><input type="number" class="sheet-skillnumber" name="attr_Trackingdice" min="1" value="3"/>D </td>
                                <td>+<input type="number" class="sheet-skillnumber" name="attr_Trackingpip" min="0" max="2" value="0"/></td>
                                <td>
                                    <input type="number" class="sheet-skillnumber2" name="attr_Trackingdice-mod" min="0" value="0"/>D+
                                    <input type="number" class="sheet-skillnumber2" name="attr_Trackingpip-mod" min="0" max="2" value="0"/>
                                </td>
                                <td><input type="checkbox" class="sheet-update" name="attr_Tracking_update" value="1" checked/><span></span> </td>
                            </tr>                            

                            

                        </table>
                        <fieldset class="repeating_perceptionskills">
                            <table class="sheet-attribute_skill" style="border-collapse: collapse;">
                                <tr>
                                    <td><button type="roll" name="roll_perskill" class="sheet-button2" value='&{template:attrib} {{stat= Perception:@{perskillname}}} {{character= @{character_name}}} {{wound= @{wound_level} (@{wound_effects}) }} {{roll= [[(@{perskilldice} + @{perskilldice-mod} + @{wound_effects} + @{gendice} - 1)d6 + 1d6! + @{perskillpip} + @{perskillpip-mod} + @{genpip}]] }}'></button></td>
                                    <td><input type="text" class="sheet-skillword" name="attr_perskillname" placeholder="Skill Name"/></td>
                                    <td><input type="number" class="sheet-skillnumber" name="attr_perskilldice" min="1" value="3"/>D </td>
                                    <td>+<input type="number" class="sheet-skillnumber" name="attr_perskillpip" min="0" max="2" value="0"/></td>
                                    <td>
                                        <input type="number" class="sheet-skillnumber2" name="attr_perskilldice-mod" min="0" value="0"/>D+
                                        <input type="number" class="sheet-skillnumber2" name="attr_perskillpip-mod" min="0" max="2" value="0"/>
                                    </td>
                                    <td><input type="checkbox" class="sheet-update" name="attr_perskill_update" value="1" checked/><span></span> </td>
                                </tr>
                            </table>
                        </fieldset>
                    </div>
                </div>
            </div>
            <div class='sheet-col'>
                <div name="Knowledge">
                    <table class="sheet-attribute_skill">
                        <tr>
                            <td><div style="width:100px;"><button type='roll' name="roll_knowledge" class="sheet-button" value='&{template:attrib} {{stat= Knowledge}} {{character= @{character_name}}} {{wound= @{wound_level} (@{wound_effects}) }} {{roll= [[(@{knowledgedice} + @{knowledgedice-mod} + @{wound_effects} + @{gendice} - 1)d6 + 1d6! + @{knowledgepip} + @{knowledgepip-mod} + @{genpip}]] }}' >Knowledge</button></div></td>
                            <td><input type="number" class="sheet-attribnumber" name="attr_knowledgedice" min="1" value="3"/>D </td>
                            <td>+<input type="number" class="sheet-attribnumber" name="attr_knowledgepip" min="0" max="2" value="0"/></td>
                            <td>
                                <input type="number" class="sheet-skillnumber2" name="attr_knowledgedice-mod" min="0" value="0"/>D+
                                <input type="number" class="sheet-skillnumber2" name="attr_knowledgepip-mod" min="0" max="2" value="0"/>
                            </td>
                            <td><input type="checkbox" class="sheet-gear" name="attr_knowledge_open" value="1" checked/><span></span> </td>
                        </tr>
                    </table>
                    <input type="checkbox" class="sheet-hider sheet-hidden" name="attr_knowledge_open" value="1" checked/><span></span>
                    <div class="sheet-hold">
                        <table class="sheet-attribute_skill" style="border-collapse: collapse;">
                            <tr>
                                <td></td>
                                <td colspan="3"><input type="checkbox" class="sheet-skillbase" name="attr_knowledge_update" value="1" checked/><span></span> </td>
                            </tr>
                            <tr>
                                <td>Roll</td>
                                <td>Skill</td>
                                <td>Dice</td>
                                <td>Pips</td>
                                <td class="sheet-center">Mod</td>
                            </tr>
                            
                            <tr>
                                <td><button type="roll" name="roll_Business" class="sheet-button2" value='&{template:attrib} {{stat= Knowledge:Business}} {{character= @{character_name}}} {{wound= @{wound_level} (@{wound_effects}) }} {{roll= [[(@{Businessdice} + @{Businessdice-mod} + @{wound_effects} + @{gendice} - 1)d6 + 1d6! + @{Businesspip} + @{knowledgedice-mod} + @{genpip}]] }}'></button></td>
                                <td><input type="text" class="sheet-skillword" name="attr_Business_name" value="Business" readonly/></td>
                                <td><input type="number" class="sheet-skillnumber" name="attr_Businessdice" min="1" value="3"/>D </td>
                                <td>+<input type="number" class="sheet-skillnumber" name="attr_Businesspip" min="0" max="2" value="0"/></td>
                                <td>
                                    <input type="number" class="sheet-skillnumber2" name="attr_Businessdice-mod" min="0" value="0"/>D+
                                    <input type="number" class="sheet-skillnumber2" name="attr_Businesspip-mod" min="0" max="2" value="0"/>
                                </td>
                                <td><input type="checkbox" class="sheet-update" name="attr_Business_update" value="1" checked/><span></span> </td>
                            </tr>

 


                            <tr>
                                <td><button type="roll" name="roll_demolitions" class="sheet-button2" value='&{template:attrib} {{stat= Knowledge:Demolitions}} {{character= @{character_name}}} {{wound= @{wound_level} (@{wound_effects}) }} {{roll= [[(@{demolitionsdice} + @{demolitionsdice-mod} + @{wound_effects} + @{gendice} - 1)d6 + 1d6! + @{demolitionspip} + @{demolitionspip-mod} + @{genpip}]] }}'></button></td>
                                <td><input type="text" class="sheet-skillword" name="attr_demolitions_name" value="Demolitions" readonly/></td>
                                <td><input type="number" class="sheet-skillnumber" name="attr_demolitionsdice" min="1" value="3"/>D </td>
                                <td>+<input type="number" class="sheet-skillnumber" name="attr_demolitionspip" min="0" max="2" value="0"/></td>
                                <td>
                                    <input type="number" class="sheet-skillnumber2" name="attr_demolitionsdice-mod" min="0" value="0"/>D+
                                    <input type="number" class="sheet-skillnumber2" name="attr_demolitionspip-mod" min="0" max="2" value="0"/>
                                </td>
                                <td><input type="checkbox" class="sheet-update" name="attr_demolitions_update" value="1" checked/><span></span> </td>
                            </tr>

                           <tr>

                                <td><button type="roll" name="roll_forgery" class="sheet-button2" value='&{template:attrib} {{stat= Knowledge:Forgery}} {{character= @{character_name}}} {{wound= @{wound_level} (@{wound_effects}) }} {{roll= [[(@{forgerydice} + @{forgerydice-mod} + @{wound_effects} + @{gendice}  - 1)d6 + 1d6! + @{forgerypip} + @{forgerypip-mod} + @{genpip}]] }}'></button></td>
                                <td><input type="text" class="sheet-skillword" name="attr_forgery_name" value="Forgery" readonly/></td>
                                <td><input type="number" class="sheet-skillnumber" name="attr_forgerydice" min="1" value="3"/>D </td>
                                <td>+<input type="number" class="sheet-skillnumber" name="attr_forgerypip" min="0" max="2" value="0"/></td>
                                <td>
                                    <input type="number" class="sheet-skillnumber2" name="attr_forgerydice-mod" min="0" value="0"/>D+
                                    <input type="number" class="sheet-skillnumber2" name="attr_forgerypip-mod" min="0" max="2" value="0"/>
                                </td>
                                <td><input type="checkbox" class="sheet-update" name="attr_forgery_update" value="1" checked/><span></span> </td>
                            </tr>


                            <tr>
                                <td><button type="roll" name="roll_Navigation" class="sheet-button2" value='&{template:attrib} {{stat= Knowledge:Navigation}} {{character= @{character_name}}} {{wound= @{wound_level} (@{wound_effects}) }} {{roll= [[(@{Navigationdice} + @{Navigationdice-mod} + @{wound_effects} + @{gendice} - 1)d6 + 1d6! + @{Navigationpip} + @{knowledgedice-mod} + @{genpip}]] }}'></button></td>
                                <td><input type="text" class="sheet-skillword" name="attr_Navigation_name" value="Navigation" readonly/></td>
                                <td><input type="number" class="sheet-skillnumber" name="attr_Navigationdice" min="1" value="3"/>D </td>
                                <td>+<input type="number" class="sheet-skillnumber" name="attr_Navigationpip" min="0" max="2" value="0"/></td>
                                <td>
                                    <input type="number" class="sheet-skillnumber2" name="attr_Navigationdice-mod" min="0" value="0"/>D+
                                    <input type="number" class="sheet-skillnumber2" name="attr_Navigationpip-mod" min="0" max="2" value="0"/>
                                </td>
                                <td><input type="checkbox" class="sheet-update" name="attr_Navigation_update" value="1" checked/><span></span> </td>
                            </tr>




                            <tr>
                                <td><button type="roll" name="roll_languages" class="sheet-button2" value='&{template:attrib} {{stat= Knowledge:Languages}} {{character= @{character_name}}} {{wound= @{wound_level} (@{wound_effects}) }} {{roll= [[(@{languagesdice} + @{languagesdice-mod} + @{wound_effects} + @{gendice} - 1)d6 + 1d6! + @{languagespip} + @{languagespip-mod} + @{genpip}]] }}'></button></td>
                                <td><input type="text" class="sheet-skillword" name="attr_languages_name" value="Languages" readonly/></td>
                                <td><input type="number" class="sheet-skillnumber" name="attr_languagesdice" min="1" value="3"/>D </td>
                                <td>+<input type="number" class="sheet-skillnumber" name="attr_languagespip" min="0" max="2" value="0"/></td>
                                <td>
                                    <input type="number" class="sheet-skillnumber2" name="attr_languagesdice-mod" min="0" value="0"/>D+
                                    <input type="number" class="sheet-skillnumber2" name="attr_languagespip-mod" min="0" max="2" value="0"/>
                                </td>
                                <td><input type="checkbox" class="sheet-update" name="attr_languages_update" value="1" checked/><span></span> </td>
                            </tr>

                            <tr>
                                <td><button type="roll" name="roll_medicine" class="sheet-button2" value='&{template:attrib} {{stat= Knowledge:Medicine}} {{character= @{character_name}}} {{{wound= @{wound_level} (@{wound_effects}) }} {{roll= [[(@{medicinedice} + @{medicinedice-mod} + @{wound_effects} - 1)d6 + 1d6! + @{medicinepip} + @{gendice} + @{medicinepip-mod} + @{genpip}]] }}'></button></td>
                                <td><input type="text" class="sheet-skillword" name="attr_medicine_name" value="Medicine" readonly/></td>
                                <td><input type="number" class="sheet-skillnumber" name="attr_medicinedice" min="1" value="3"/>D </td>
                                <td>+<input type="number" class="sheet-skillnumber" name="attr_medicinepip" min="0" max="2" value="0"/></td>
                                <td>
                                    <input type="number" class="sheet-skillnumber2" name="attr_medicinedice-mod" min="0" value="0"/>D+
                                    <input type="number" class="sheet-skillnumber2" name="attr_medicinepip-mod" min="0" max="2" value="0"/>
                                </td>
                                <td><input type="checkbox" class="sheet-update" name="attr_medicine_update" value="1" checked/><span></span> </td>
                            </tr>

                            <tr>
                                <td><button type="roll" name="roll_scholar" class="sheet-button2" value='&{template:attrib} {{stat= Knowledge:Scholar}} {{character= @{character_name}}} {{wound= @{wound_level} (@{wound_effects}) }} {{roll= [[(@{scholardice} + @{scholardice-mod} + @{wound_effects} + @{gendice} - 1)d6 + 1d6! + @{scholarpip} + @{scholarpip-mod} + @{genpip}]] }}'></button></td>
                                <td><input type="text" class="sheet-skillword" name="attr_scholar_name" value="Scholar" readonly/></td>
                                <td><input type="number" class="sheet-skillnumber" name="attr_scholardice" min="1" value="3"/>D </td>
                                <td>+<input type="number" class="sheet-skillnumber" name="attr_scholarpip" min="0" max="2" value="0"/></td>
                                <td>
                                    <input type="number" class="sheet-skillnumber2" name="attr_scholardice-mod" min="0" value="0"/>D+
                                    <input type="number" class="sheet-skillnumber2" name="attr_scholarpip-mod" min="0" max="2" value="0"/>
                                </td>
                                <td><input type="checkbox" class="sheet-update" name="attr_scholar_update" value="1" checked/><span></span> </td>
                            </tr>



                            <tr>
                                <td><button type="roll" name="roll_Security" class="sheet-button2" value='&{template:attrib} {{stat= Knowledge:Security}} {{character= @{character_name}}} {{wound= @{wound_level} (@{wound_effects}) }} {{roll= [[(@{Securitydice} + @{Securitydice-mod} + @{wound_effects} + @{gendice} - 1)d6 + 1d6! + @{Securitypip} + @{Securitypip-mod} + @{genpip}]] }}'></button></td>
                                <td><input type="text" class="sheet-skillword" name="attr_Security_name" value="Security" readonly/></td>
                                <td><input type="number" class="sheet-skillnumber" name="attr_Securitydice" min="1" value="3"/>D </td>
                                <td>+<input type="number" class="sheet-skillnumber" name="attr_Securitypip" min="0" max="2" value="0"/></td>
                                <td>
                                    <input type="number" class="sheet-skillnumber2" name="attr_Securitydice-mod" min="0" value="0"/>D+
                                    <input type="number" class="sheet-skillnumber2" name="attr_Securitypip-mod" min="0" max="2" value="0"/>
                                </td>
                                <td><input type="checkbox" class="sheet-update" name="attr_Security_update" value="1" checked/><span></span> </td>
                            </tr>
                            <tr>
                                <td><button type="roll" name="roll_Tech" class="sheet-button2" value='&{template:attrib} {{stat= Knowledge:Tech}} {{character= @{character_name}}} {{wound= @{wound_level} (@{wound_effects}) }} {{roll= [[(@{Techdice} + @{Techdice-mod} + @{wound_effects} + @{gendice} - 1)d6 + 1d6! + @{Techpip} + @{knowledgedice-mod} + @{genpip}]] }}'></button></td>
                                <td><input type="text" class="sheet-skillword" name="attr_Tech_name" value="Tech" readonly/></td>
                                <td><input type="number" class="sheet-skillnumber" name="attr_Techdice" min="1" value="3"/>D </td>
                                <td>+<input type="number" class="sheet-skillnumber" name="attr_Techpip" min="0" max="2" value="0"/></td>
                                <td>
                                    <input type="number" class="sheet-skillnumber2" name="attr_Techdice-mod" min="0" value="0"/>D+
                                    <input type="number" class="sheet-skillnumber2" name="attr_Techpip-mod" min="0" max="2" value="0"/>
                                </td>
                                <td><input type="checkbox" class="sheet-update" name="attr_Tech_update" value="1" checked/><span></span> </td>
                            </tr>
                          
                         </table>
                        <fieldset class="repeating_knowledgeskills">
                            <table class="sheet-attribute_skill" style="border-collapse: collapse;">
                                <tr>
                                    <td><button type="roll" name="roll_knowskill" class="sheet-button2" value='&{template:attrib} {{stat= Knowledge:@{knowskillname}}} {{character= @{character_name}}} {{wound= @{wound_level} (@{wound_effects}) }} {{roll= [[(@{knowskilldice} + @{knowskilldice-mod} + @{wound_effects} + @{gendice} - 1)d6 + 1d6! + @{knowskillpip} + @{knowskillpip-mod}]] }}'></button></td>
                                    <td><input type="text" class="sheet-skillword" name="attr_knowskillname" placeholder="Skill Name"/></td>
                                    <td><input type="number" class="sheet-skillnumber" name="attr_knowskilldice" min="1" value="3"/>D </td>
                                    <td>+<input type="number" class="sheet-skillnumber" name="attr_knowskillpip" min="0" max="2" value="0"/></td>
                                    <td>
                                        <input type="number" class="sheet-skillnumber2" name="attr_knowskilldice-mod" min="0" value="0"/>D+
                                        <input type="number" class="sheet-skillnumber2" name="attr_knowskillpip-mod" min="0" max="2" value="0"/>
                                    </td>
                                    <td><input type="checkbox" class="sheet-update" name="attr_knowskill_update" value="1" checked/><span></span> </td>
                                </tr>
                            </table>
                        </fieldset>
                    </div>
                </div>
            </div>
        </div>
        <div class='sheet-2colrow'>
            <div class='sheet-col'>
                <div name="Coordination">
                    <table class="sheet-dark">
                        <tr>
                            <td><div style="width:100px;"><button type='roll' name="roll_Coordination" class="sheet-button" value='&{template:attrib} {{stat= Coordination}} {{character= @{character_name}}} {{wound= @{wound_level} (@{wound_effects}) }} {{roll= [[(@{Coordinationdice} + @{Coordinationdice-mod} + @{wound_effects} + @{gendice} - 1)d6 + 1d6! + @{Coordinationpip} + @{Coordinationpip-mod} + @{genpip}]] }}' >Coordination</button></div></td>
                            <td><input type="number" class="sheet-attribnumber" name="attr_Coordinationdice" min="1" value="3"/>D </td>
                            <td>+<input type="number" class="sheet-attribnumber" name="attr_Coordinationpip" min="0" max="2" value="0"/></td>
                            <td>
                                <input type="number" class="sheet-skillnumber2" name="attr_Coordinationdice-mod" min="0" value="0"/>D+
                                <input type="number" class="sheet-skillnumber2" name="attr_Coordinationpip-mod" min="0" max="2" value="0"/>
                            </td>
                            <td><input type="checkbox" class="sheet-gear" name="attr_Coordination_open" value="1" checked/><span></span> </td>
                        </tr>
                    </table>
                    <input type="checkbox" class="sheet-hider sheet-hidden" name="attr_Coordination_open" value="1" checked/><span></span>
                    <div class="sheet-hold">
                        <table class="sheet-attribute_skill" style="border-collapse: collapse;">
                            <tr>
                                <td></td>
                                <td colspan="3"><input type="checkbox" class="sheet-skillbase" name="attr_Coordination_update" value="1" checked/><span></span> </td>
                            </tr>
                            <tr>
                                <td>Roll</td>
                                <td>Skill</td>
                                <td>Dice</td>
                                <td>Pips</td>
                                <td class="sheet-center">Mod</td>
                            </tr>

                            <tr>
                                <td><button type="roll" name="roll_lockpicking" class="sheet-button2" value='&{template:attrib} {{stat= Coordination:lockpicking}} {{character= @{character_name}}} {{wound= @{wound_level} (@{wound_effects}) }} {{roll= [[(@{lockpickingdice} + @{lockpickingdice-mod} + @{wound_effects} + @{gendice} - 1)d6 + 1d6! + @{lockpickingpip} + @{lockpickingpip-mod} + @{genpip}]] }}'></button></td>
                                <td><input type="text" class="sheet-skillword" name="attr_lockpicking_name" value="Lockpicking" readonly/></td>
                                <td><input type="number" class="sheet-skillnumber" name="attr_lockpickingdice" min="1" value="3"/>D </td>
                                <td>+<input type="number" class="sheet-skillnumber" name="attr_lockpickingpip" min="0" max="2" value="0"/></td>
                                <td>
                                    <input type="number" class="sheet-skillnumber2" name="attr_lockpickingdice-mod" min="0" value="0"/>D+
                                    <input type="number" class="sheet-skillnumber2" name="attr_lockpickingpip-mod" min="0" max="2" value="0"/>
                                </td>
                                <td><input type="checkbox" class="sheet-update" name="attr_lockpicking_update" value="1" checked/><span></span> </td>
                            </tr>

                            <tr>
                                <td><button type="roll" class="sheet-button2" name="roll_Marksmanship" value='&{template:attrib} {{stat= Coordination:Marksmanship}} {{character= @{character_name}}} {{wound= @{wound_level} (@{wound_effects}) }} {{roll= [[(@{Marksmanshipdice} + @{Marksmanshipdice-mod} + @{wound_effects} + @{gendice} - 1)d6 + 1d6! + @{Marksmanshippip} + @{Marksmanshippip-mod} + @{genpip}]] }}'></button></td>
                                <td><input type="text" class="sheet-skillword" name="attr_Marksmanship_name" value="Marksmanship" readonly/></td>
                                <td><input type="number" class="sheet-skillnumber" name="attr_Marksmanshipdice" min="1" value="3"/>D </td>
                                <td>+<input type="number" class="sheet-skillnumber" name="attr_Marksmanshippip" min="0" max="2" value="0"/></td>
                                <td>
                                    <input type="number" class="sheet-skillnumber2" name="attr_Marksmanshipdice-mod" min="0" value="0"/>D+
                                    <input type="number" class="sheet-skillnumber2" name="attr_Marksmanshippip-mod" min="0" max="2" value="0"/>
                                </td>
                                <td><input type="checkbox" class="sheet-update" name="attr_Marksmanship_update" value="1" checked/><span></span> </td>
                            </tr>
                            <tr>
                                <td><button type="roll" class="sheet-button2" name="roll_Missile" value='&{template:attrib} {{stat= Coordination:Missile Weapons}} {{character= @{character_name}}} {{wound= @{wound_level} (@{wound_effects}) }} {{roll= [[(@{missiledice} + @{missiledice-mod} + @{wound_effects} + @{gendice} - 1)d6 + 1d6! + @{missilepip} + @{missilepip-mod} + @{genpip}]] }}'></button></td>
                                <td><input type="text" class="sheet-skillword" name="attr_missile_name" value="Missile Weapons" readonly/></td>
                                <td><input type="number" class="sheet-skillnumber" name="attr_missiledice" min="1" value="3"/>D </td>
                                <td>+<input type="number" class="sheet-skillnumber" name="attr_missilepip" min="0" max="2" value="0"/></td>
                                <td>
                                    <input type="number" class="sheet-skillnumber2" name="attr_missiledice-mod" min="0" value="0"/>D+
                                    <input type="number" class="sheet-skillnumber2" name="attr_missilepip-mod" min="0" max="2" value="0"/>
                                </td>
                                <td><input type="checkbox" class="sheet-update" name="attr_missile_update" value="1" checked/><span></span> </td>
                            </tr>
                            <tr>
                                <td><button type="roll" class="sheet-button2" name="roll_Sleight" value='&{template:attrib} {{stat= Coordination:Sleight of Hand}} {{character= @{character_name}}} {{wound= @{wound_level} (@{wound_effects}) }} {{roll= [[(@{sleightdice} + @{sleightdice-mod} + @{wound_effects} + @{gendice} - 1)d6 + 1d6! + @{sleightpip} + @{sleightpip-mod} + @{genpip}]] }}'></button></td>
                                <td><input type="text" class="sheet-skillword" name="attr_sleight_name" value="Sleight of Hand" readonly/></td>
                                <td><input type="number" class="sheet-skillnumber" name="attr_sleightdice" min="1" value="3"/>D </td>
                                <td>+<input type="number" class="sheet-skillnumber" name="attr_sleightpip" min="0" max="2" value="0"/></td>
                                <td>
                                    <input type="number" class="sheet-skillnumber2" name="attr_sleightdice-mod" min="0" value="0"/>D+
                                    <input type="number" class="sheet-skillnumber2" name="attr_sleightpip-mod" min="0" max="2" value="0"/>
                                </td>
                                <td><input type="checkbox" class="sheet-update" name="attr_sleight_update" value="1" checked/><span></span> </td>
                            </tr>
                            <tr>
                                <td><button type="roll" class="sheet-button2" name="roll_Throwing" value='&{template:attrib} {{stat= Coordination:Throwing}} {{character= @{character_name}}} {{wound= @{wound_level} (@{wound_effects}) }} {{roll= [[(@{throwingdice} + @{throwingdice-mod} + @{wound_effects} + @{gendice} - 1)d6 + 1d6! + @{throwingpip} + @{throwingpip-mod} + @{genpip}]] }}'></button></td>
                                <td><input type="text" class="sheet-skillword" name="attr_throwing_name" value="Throwing" readonly/></td>
                                <td><input type="number" class="sheet-skillnumber" name="attr_throwingdice" min="1" value="3"/>D </td>
                                <td>+<input type="number" class="sheet-skillnumber" name="attr_throwingpip" min="0" max="2" value="0"/></td>
                                <td>
                                    <input type="number" class="sheet-skillnumber2" name="attr_throwingdice-mod" min="0" value="0"/>D+
                                    <input type="number" class="sheet-skillnumber2" name="attr_throwingpip-mod" min="0" max="2" value="0"/>
                                </td>
                                <td><input type="checkbox" class="sheet-update" name="attr_throwing_update" value="1" checked/><span></span> </td>
                            </tr>
                            <tr>
                                <td><button type="roll" class="sheet-button2" name="roll_Piloting" value='&{template:attrib} {{stat= Coordination:Piloting}} {{character= @{character_name}}} {{wound= @{wound_level} (@{wound_effects}) }} {{roll= [[(@{Pilotingdice} + @{Pilotingdice-mod} + @{wound_effects} + @{gendice} - 1)d6 + 1d6! + @{Pilotingpip} + @{Pilotingpip-mod} + @{genpip}]] }}'></button></td>
                                <td><input type="text" class="sheet-skillword" name="attr_Piloting_name" value="Piloting" readonly/></td>
                                <td><input type="number" class="sheet-skillnumber" name="attr_Pilotingdice" min="1" value="3"/>D </td>
                                <td>+<input type="number" class="sheet-skillnumber" name="attr_Pilotingpip" min="0" max="2" value="0"/></td>
                                <td>
                                    <input type="number" class="sheet-skillnumber2" name="attr_Pilotingdice-mod" min="0" value="0"/>D+
                                    <input type="number" class="sheet-skillnumber2" name="attr_Pilotingpip-mod" min="0" max="2" value="0"/>
                                </td>
                                <td><input type="checkbox" class="sheet-update" name="attr_Piloting_update" value="1" checked/><span></span> </td>
                            </tr>
                        </table>
                        <fieldset class="repeating_Coordinationskills">
                            <table class="sheet-attribute_skill" style="border-collapse: collapse;">
                                <tr>
                                    <td><button type="roll" name="roll_techskill" class="sheet-button2" value='&{template:attrib} {{stat= Coordination:@{techskillname}}} {{character= @{character_name}}} {{wound= @{wound_level} (@{wound_effects}) }} {{roll= [[(@{techskilldice} + @{techskilldice-mod} + @{wound_effects} + @{gendice} - 1)d6 + 1d6! + @{techskillpip} + @{techskillpip-mod} + @{genpip}]] }}'></button></td>
                                    <td><input type="text" class="sheet-skillword" name="attr_techskillname" placeholder="Skill Name"/></td>
                                    <td><input type="number" class="sheet-skillnumber" name="attr_techskilldice" min="1" value="3"/>D </td>
                                    <td>+<input type="number" class="sheet-skillnumber" name="attr_techskillpip" min="0" max="2" value="0"/></td>
                                    <td>
                                        <input type="number" class="sheet-skillnumber2" name="attr_techskilldice-mod" min="0" value="0"/>D+
                                        <input type="number" class="sheet-skillnumber2" name="attr_techskillpip-mod" min="0" max="2" value="0"/>
                                    </td>
                                    <td><input type="checkbox" class="sheet-update" name="attr_techskill_update" value="1" checked/><span></span> </td>
                                </tr>
                            </table>
                        </fieldset>
                    </div>
                </div> 
            </div>
            <div class='sheet-col'>
                <div name="Presense">
                    <table class="sheet-attribute_skill">
                        <tr>
                            <td><div style="width:100px;"><button type='roll' name="roll_Presense" class="sheet-button" value='&{template:attrib} {{stat= Presense}} {{character= @{character_name}}} {{wound= @{wound_level} (@{wound_effects}) }} {{roll= [[(@{Presensedice} + @{Presensedice-mod} + @{wound_effects} + @{gendice} - 1)d6 + 1d6! + @{Presensepip} + @{Presensedice-mod} + @{genpip}]] }}' >Presense</button></div></td>
                            <td><input type="number" class="sheet-attribnumber" name="attr_Presensedice" min="1" value="3"/>D </td>
                            <td>+<input type="number" class="sheet-attribnumber" name="attr_Presensepip" min="0" max="2" value="0"/></td>
                            <td>
                                <input type="number" class="sheet-skillnumber2" name="attr_Presensedice-mod" min="0" value="0"/>D+
                                <input type="number" class="sheet-skillnumber2" name="attr_Presensepip-mod" min="0" max="2" value="0"/>
                            </td>
                            <td><input type="checkbox" class="sheet-gear" name="attr_Presense_open" value="1" checked/><span></span> </td>
                        </tr>
                    </table>
                    <input type="checkbox" class="sheet-hider sheet-hidden" name="attr_Presense_open" value="1" checked/><span></span>
                    <div class="sheet-hold">
                        <table class="sheet-attribute_skill" style="border-collapse: collapse;">
                            <tr>
                                <td></td>
                                <td colspan="3"><input type="checkbox" class="sheet-skillbase" name="attr_Presense_update" value="1" checked/><span></span> </td>
                            </tr>
                            <tr>
                                <td>Roll</td>
                                <td>Skill</td>
                                <td>Dice</td>
                                <td>Pips</td>
                                <td class="sheet-center">Mod</td>
                            </tr>
                            <tr>
                                <td><button type="roll" name="roll_animal" class="sheet-button2" value='&{template:attrib} {{stat= Presense:Animal Handiling}} {{character= @{character_name}}} {{wound= @{wound_level} (@{wound_effects}) }} {{roll= [[(@{animaldice} + @{animaldice-mod} + @{wound_effects} + @{gendice} - 1)d6 + 1d6! + @{animalpip} + @{animalpip-mod} + @{genpip}]] }}'></button></td>
                                <td><input type="text" class="sheet-skillword" name="attr_animal_name" value="Animal Handiling" readonly/></td>
                                <td><input type="number" class="sheet-skillnumber" name="attr_animaldice" min="1" value="3"/>D </td>
                                <td>+<input type="number" class="sheet-skillnumber" name="attr_animalpip" min="0" max="2" value="0"/></td>
                                <td>
                                    <input type="number" class="sheet-skillnumber2" name="attr_animaldice-mod" min="0" value="0"/>D+
                                    <input type="number" class="sheet-skillnumber2" name="attr_animalpip-mod" min="0" max="2" value="0"/>
                                </td>
                                <td><input type="checkbox" class="sheet-update" name="attr_animal_update" value="1" checked/><span></span> </td>
                            </tr>
                            <tr>
                                <td><button type="roll" name="roll_Charm" class="sheet-button2" value='&{template:attrib} {{stat= Presense:Charm}} {{wound= @{wound_level} (@{wound_effects}) }} {{character= @{character_name}}} {{roll= [[(@{Charmdice} + @{Charmdice-mod} + @{wound_effects} + @{gendice} - 1)d6 + 1d6! + @{Charmpip} + @{Charmpip-mod} + @{genpip}]] }}'></button></td>
                                <td><input type="text" class="sheet-skillword" name="attr_Charm_name" value="Charm" readonly/></td>
                                <td><input type="number" class="sheet-skillnumber" name="attr_Charmdice" min="1" value="3"/>D </td>
                                <td>+<input type="number" class="sheet-skillnumber" name="attr_Charmpip" min="0" max="2" value="0"/></td>
                                <td>
                                    <input type="number" class="sheet-skillnumber2" name="attr_Charmdice-mod" min="0" value="0"/>D+
                                    <input type="number" class="sheet-skillnumber2" name="attr_Charmpip-mod" min="0" max="2" value="0"/>
                                </td>
                                <td><input type="checkbox" class="sheet-update" name="attr_Charm_update" value="1" checked/><span></span> </td>
                            </tr>
                            <tr>
                                <td><button type="roll" name="roll_Command" class="sheet-button2" value='&{template:attrib} {{stat= Presense:Command}} {{character= @{character_name}}} {{wound= @{wound_level} (@{wound_effects}) }} {{roll= [[(@{Commanddice} + @{Commanddice-mod} + @{wound_effects} + @{gendice} - 1)d6 + 1d6! + @{Commandpip} + @{Commandpip-mod} + @{genpip}]] }}'></button></td>
                                <td><input type="text" class="sheet-skillword" name="attr_Command_name" value="Command" readonly/></td>
                                <td><input type="number" class="sheet-skillnumber" name="attr_Commanddice" min="1" value="3"/>D </td>
                                <td>+<input type="number" class="sheet-skillnumber" name="attr_Commandpip" min="0" max="2" value="0"/></td>
                                <td>
                                    <input type="number" class="sheet-skillnumber2" name="attr_Commanddice-mod" min="0" value="0"/>D+
                                    <input type="number" class="sheet-skillnumber2" name="attr_Commandpip-mod" min="0" max="2" value="0"/>
                                </td>
                                <td><input type="checkbox" class="sheet-update" name="attr_Command_update" value="1" checked/><span></span> </td>
                            </tr>

                            <tr>
                                <td><button type="roll" name="roll_Con" class="sheet-button2" value='&{template:attrib} {{stat= Presense:Con}} {{character= @{character_name}}} {{wound= @{wound_level} (@{wound_effects}) }} {{roll= [[(@{Condice} + @{Condice-mod} + @{wound_effects} + @{gendice} - 1)d6 + 1d6! + @{Conpip} + @{Conpip-mod} + @{genpip}]] }}'></button></td>
                                <td><input type="text" class="sheet-skillword" name="attr_Con_name" value="Con" readonly/></td>
                                <td><input type="number" class="sheet-skillnumber" name="attr_Condice" min="1" value="3"/>D </td>
                                <td>+<input type="number" class="sheet-skillnumber" name="attr_Conpip" min="0" max="2" value="0"/></td>
                                <td>
                                    <input type="number" class="sheet-skillnumber2" name="attr_Condice-mod" min="0" value="0"/>D+
                                    <input type="number" class="sheet-skillnumber2" name="attr_Conpip-mod" min="0" max="2" value="0"/>
                                </td>
                                <td><input type="checkbox" class="sheet-update" name="attr_Con_update" value="1" checked/><span></span> </td>
                            </tr>
                             <tr>
                                <td><button type="roll" name="roll_Disguise" class="sheet-button2" value='&{template:attrib} {{stat= Presense:Disguise}} {{character= @{character_name}}} {{wound= @{wound_level} (@{wound_effects}) }} {{roll= [[(@{Disguisedice} + @{Disguisedice-mod} + @{wound_effects} + @{gendice} - 1)d6 + 1d6! + @{Disguisepip} + @{Disguisepip-mod} + @{genpip}]] }}'></button></td>
                                <td><input type="text" class="sheet-skillword" name="attr_Disguise_name" value="Disguise" readonly/></td>
                                <td><input type="number" class="sheet-skillnumber" name="attr_Disguisedice" min="1" value="3"/>D </td>
                                <td>+<input type="number" class="sheet-skillnumber" name="attr_Disguisepip" min="0" max="2" value="0"/></td>
                                <td>
                                    <input type="number" class="sheet-skillnumber2" name="attr_Disguisedice-mod" min="0" value="0"/>D+
                                    <input type="number" class="sheet-skillnumber2" name="attr_Disguisepip-mod" min="0" max="2" value="0"/>
                                </td>
                                <td><input type="checkbox" class="sheet-update" name="attr_Disguise_update" value="1" checked/><span></span> </td>
                            </tr>
                            <tr>
                                <td><button type="roll" name="roll_Intimidation" class="sheet-button2" value='&{template:attrib} {{stat= Presense:Intimidation}} {{character= @{character_name}}} {{wound= @{wound_level} (@{wound_effects}) }} {{roll= [[(@{Intimidationdice} + @{Intimidationdice-mod} + @{wound_effects} + @{gendice} - 1)d6 + 1d6! + @{Intimidationpip} + @{Intimidationpip-mod} + @{genpip}]] }}'></button></td>
                                <td><input type="text" class="sheet-skillword" name="attr_Intimidation_name" value="Intimidation" readonly/></td>
                                <td><input type="number" class="sheet-skillnumber" name="attr_Intimidationdice" min="1" value="3"/>D </td>
                                <td>+<input type="number" class="sheet-skillnumber" name="attr_Intimidationpip" min="0" max="2" value="0"/></td>
                                <td>
                                    <input type="number" class="sheet-skillnumber2" name="attr_Intimidationdice-mod" min="0" value="0"/>D+
                                    <input type="number" class="sheet-skillnumber2" name="attr_Intimidationpip-mod" min="0" max="2" value="0"/>
                                </td>
                                <td><input type="checkbox" class="sheet-update" name="attr_Intimidation_update" value="1" checked/><span></span> </td>
                            </tr>
                            <tr>
                                <td><button type="roll" name="roll_Persuasion" class="sheet-button2" value='&{template:attrib} {{stat= Presense:Persuasion}} {{character= @{character_name}}} {{wound= @{wound_level} (@{wound_effects}) }} {{roll= [[(@{Persuasiondice} + @{Persuasiondice-mod} + @{wound_effects} + @{gendice} - 1)d6 + 1d6! + @{Persuasionpip} + @{Persuasionpip-mod} + @{genpip}]] }}'></button></td>
                                <td><input type="text" class="sheet-skillword" name="attr_Persuasion_name" value="Persuasion" readonly/></td>
                                <td><input type="number" class="sheet-skillnumber" name="attr_Persuasiondice" min="1" value="3"/>D </td>
                                <td>+<input type="number" class="sheet-skillnumber" name="attr_Persuasionpip" min="0" max="2" value="0"/></td>
                                <td>
                                    <input type="number" class="sheet-skillnumber2" name="attr_Persuasiondice-mod" min="0" value="0"/>D+
                                    <input type="number" class="sheet-skillnumber2" name="attr_Persuasionpip-mod" min="0" max="2" value="0"/>
                                </td>
                                <td><input type="checkbox" class="sheet-update" name="attr_Persuasion_update" value="1" checked/><span></span> </td>
                            </tr>
                            <tr>
                                <td><button type="roll" name="roll_Willpower" class="sheet-button2" value='&{template:attrib} {{stat= Presense:Willpower}} {{character= @{character_name}}} {{wound= @{wound_level} (@{wound_effects}) }} {{roll= [[(@{Willpowerdice} + @{Willpowerdice-mod} + @{wound_effects} + @{gendice} - 1)d6 + 1d6! + @{Willpowerpip} + @{Willpowerpip-mod} + @{genpip}]] }}'></button></td>
                                <td><input type="text" class="sheet-skillword" name="attr_Willpower_name" value="Willpower" readonly/></td>
                                <td><input type="number" class="sheet-skillnumber" name="attr_Willpowerdice" min="1" value="3"/>D </td>
                                <td>+<input type="number" class="sheet-skillnumber" name="attr_Willpowerpip" min="0" max="2" value="0"/></td>
                                <td>
                                    <input type="number" class="sheet-skillnumber2" name="attr_Willpowerdice-mod" min="0" value="0"/>D+
                                    <input type="number" class="sheet-skillnumber2" name="attr_Willpowerpip-mod" min="0" max="2" value="0"/>
                                </td>
                                <td><input type="checkbox" class="sheet-update" name="attr_Willpower_update" value="1" checked/><span></span> </td>
                            </tr>
                        </table>
                        <fieldset class="repeating_Presenseskills">
                            <table class="sheet-attribute_skill" style="border-collapse: collapse;">
                                <tr>
                                    <td><button type="roll" name="roll_mechskill" class="sheet-button2" value='&{template:attrib} {{stat= Presense:@{mechskillname}}} {{character= @{character_name}}} {{wound= @{wound_level} (@{wound_effects}) }} {{roll= [[(@{mechskilldice} + @{mechskilldice-mod} + @{wound_effects} + @{gendice} - 1)d6 + 1d6! + @{mechskillpip} + @{mechskilldice-mod} + @{genpip}]] }}'></button></td>
                                    <td><input type="text" class="sheet-skillword" name="attr_mechskillname" placeholder="Skill Name"/></td>
                                    <td><input type="number" class="sheet-skillnumber" name="attr_mechskilldice" min="1" value="3"/>D </td>
                                    <td>+<input type="number" class="sheet-skillnumber" name="attr_mechskillpip" min="0" max="2" value="0"/></td>
                                    <td>
                                        <input type="number" class="sheet-skillnumber2" name="attr_mechskilldice-mod" min="0" value="0"/>D+
                                        <input type="number" class="sheet-skillnumber2" name="attr_mechskillpip-mod" min="0" max="2" value="0"/>
                                    </td>
                                    <td><input type="checkbox" class="sheet-update" name="attr_mechskill_update" value="1" checked/><span></span> </td>
                                </tr>
                            </table>
                        </fieldset>
                    </div>
                </div>
            </div>
        </div>
    
    
    
<div class='sheet-2colrow'>
            <div class='sheet-col'>
                <div name="psionics">
                    <table class="sheet-dark">
                        <tr>
                            <td><div style="width:100px;"><button type='roll' name="roll_psionics" class="sheet-button" value='&{template:attrib} {{stat= psionics}} {{character= @{character_name}}} {{wound= @{wound_level} (@{wound_effects}) }} {{roll= [[(@{psionicsdice} + @{psionicsdice-mod} + @{wound_effects} + @{gendice} - 1)d6 + 1d6! + @{psionicspip} + @{psionicspip-mod} + @{genpip}]] }}' >psionics</button></div></td>
                            <td><input type="number" class="sheet-attribnumber" name="attr_psionicsdice" min="1" value="0"/>D </td>
                            <td>+<input type="number" class="sheet-attribnumber" name="attr_psionicspip" min="0" max="2" value="0"/></td>
                            <td>
                                <input type="number" class="sheet-skillnumber2" name="attr_psionicsdice-mod" min="0" value="0"/>D+
                                <input type="number" class="sheet-skillnumber2" name="attr_psionicspip-mod" min="0" max="2" value="0"/>
                            </td>
                            <td><input type="checkbox" class="sheet-gear" name="attr_psionics_open" value="1" checked/><span></span> </td>
                        </tr>
                    </table>
                    <input type="checkbox" class="sheet-hider sheet-hidden" name="attr_psionics_open" value="1" checked/><span></span>
                    <div class="sheet-hold">
                        <table class="sheet-attribute_skill" style="border-collapse: collapse;">
                            <tr>
                                <td></td>
                                <td colspan="3"><input type="checkbox" class="sheet-skillbase" name="attr_psionics_update" value="1" checked/><span></span> </td>
                            </tr>
                            <tr>
                                <td>Roll</td>
                                <td>Skill</td>
                                <td>Dice</td>
                                <td>Pips</td>
                                <td class="sheet-center">Mod</td>
                            </tr>
                            <tr>
                                <td><button type="roll" name="roll_astral" class="sheet-button2" value='&{template:attrib} {{stat= psionics:astral projection}} {{character= @{character_name}}} {{wound= @{wound_level} (@{wound_effects}) }} {{roll= [[(@{astraldice} + @{astraldice-mod} + @{wound_effects} + @{gendice} - 1)d6 + 1d6! + @{astralpip} + @{astralpip-mod} + @{genpip}]] }}'></button></td>
                                <td><input type="text" class="sheet-skillword" name="attr_astral_name" value="Astral Projection" readonly/></td>
                                <td><input type="number" class="sheet-skillnumber" name="attr_astraldice" min="1" value="0"/>D </td>
                                <td>+<input type="number" class="sheet-skillnumber" name="attr_astralpip" min="0" max="2" value="0"/></td>
                                <td>
                                    <input type="number" class="sheet-skillnumber2" name="attr_astraldice-mod" min="0" value="0"/>D+
                                    <input type="number" class="sheet-skillnumber2" name="attr_astralpip-mod" min="0" max="2" value="0"/>
                                </td>
                                <td><input type="checkbox" class="sheet-update" name="attr_astral_update" value="1" checked/><span></span> </td>
                            </tr>

                           <tr>
                                <td><button type="roll" name="roll_empathy" class="sheet-button2" value='&{template:attrib} {{stat= psionics:Empathy}} {{character= @{character_name}}} {{wound= @{wound_level} (@{wound_effects}) }} {{roll= [[(@{empathydice} + @{empathydice-mod} + @{wound_effects} + @{gendice} - 1)d6 + 1d6! + @{empathypip} + @{empathypip-mod} + @{genpip}]] }}'></button></td>
                                <td><input type="text" class="sheet-skillword" name="attr_empathy_name" value="empathy" readonly/></td>
                                <td><input type="number" class="sheet-skillnumber" name="attr_empathydice" min="1" value="0"/>D </td>
                                <td>+<input type="number" class="sheet-skillnumber" name="attr_empathypip" min="0" max="2" value="0"/></td>
                                <td>
                                    <input type="number" class="sheet-skillnumber2" name="attr_empathydice-mod" min="0" value="0"/>D+
                                    <input type="number" class="sheet-skillnumber2" name="attr_empathypip-mod" min="0" max="2" value="0"/>
                                </td>
                                <td><input type="checkbox" class="sheet-update" name="attr_empathy_update" value="1" checked/><span></span> </td>
                            </tr>
                        </table>

                        <fieldset class="repeating_psionicsskills">
                            <table class="sheet-attribute_skill" style="border-collapse: collapse;">
                                <tr>
                                    <td><button type="roll" name="roll_psionicsskill" class="sheet-button2" value='&{template:attrib} {{stat= psionics:@{psionicsskillname}}} {{character= @{character_name}}} {{wound= @{wound_level} (@{wound_effects}) }} {{roll= [[(@{psionicsskilldice} + @{psionicsskilldice-mod} + @{wound_effects} + @{gendice} - 1)d6 + 1d6! + @{psionicsskillpip} + @{psionicsskillpip-mod} + @{genpip}]] }}'></button></td>
                                    <td><input type="text" class="sheet-skillword" name="attr_psionicsskillname" placeholder="Skill Name"/></td>
                                    <td><input type="number" class="sheet-skillnumber" name="attr_psionicsskilldice" min="1" value="0"/>D </td>
                                    <td>+<input type="number" class="sheet-skillnumber" name="attr_psionicsskillpip" min="0" max="2" value="0"/></td>
                                    <td>
                                        <input type="number" class="sheet-skillnumber2" name="attr_psionicsskilldice-mod" min="0" value="0"/>D+
                                        <input type="number" class="sheet-skillnumber2" name="attr_psionicsskillpip-mod" min="0" max="2" value="0"/>
                                    </td>
                                    <td><input type="checkbox" class="sheet-update" name="attr_psionicsskill_update" value="1" checked/><span></span> </td>
                                </tr>
                            </table>
                        </fieldset>
                    </div>
                </div> 
            </div>


            <div class='sheet-col'>
                <div name="magic">
                    <table class="sheet-attribute_skill">
                        <tr>
                            <td><div style="width:100px;"><button type='roll' name="roll_magic" class="sheet-button" value='&{template:attrib} {{stat= magic}} {{character= @{character_name}}} {{wound= @{wound_level} (@{wound_effects}) }} {{roll= [[(@{magicdice} + @{magicdice-mod} + @{wound_effects} + @{gendice} - 1)d6 + 1d6! + @{magicpip} + @{magicdice-mod} + @{genpip}]] }}' >magic</button></div></td>
                            <td><input type="number" class="sheet-attribnumber" name="attr_magicdice" min="1" value="0"/>D </td>
                            <td>+<input type="number" class="sheet-attribnumber" name="attr_magicpip" min="0" max="2" value="0"/></td>
                            <td>
                                <input type="number" class="sheet-skillnumber2" name="attr_magicdice-mod" min="0" value="0"/>D+
                                <input type="number" class="sheet-skillnumber2" name="attr_magicpip-mod" min="0" max="2" value="0"/>
                            </td>
                            <td><input type="checkbox" class="sheet-gear" name="attr_magic_open" value="1" checked/><span></span> </td>
                        </tr>
                    </table>
                    <input type="checkbox" class="sheet-hider sheet-hidden" name="attr_magic_open" value="1" checked/><span></span>
                    <div class="sheet-hold">
                        <table class="sheet-attribute_skill" style="border-collapse: collapse;">
                            <tr>
                                <td></td>
                                <td colspan="3"><input type="checkbox" class="sheet-skillbase" name="attr_magic_update" value="1" checked/><span></span> </td>
                            </tr>
                            <tr>
                                <td>Roll</td>
                                <td>Skill</td>
                                <td>Dice</td>
                                <td>Pips</td>
                                <td class="sheet-center">Mod</td>
                            </tr>



                            <tr>
                                <td><button type="roll" name="roll_alteration" class="sheet-button2" value='&{template:attrib} {{stat= magic:alteration}} {{character= @{character_name}}} {{wound= @{wound_level} (@{wound_effects}) }} {{roll= [[(@{alterationdice} + @{alterationdice-mod} + @{wound_effects} + @{gendice} - 1)d6 + 1d6! + @{alterationpip} + @{alterationpip-mod} + @{genpip}]] }}'></button></td>
                                <td><input type="text" class="sheet-skillword" name="attr_alteration_name" value="alteration" readonly/></td>
                                <td><input type="number" class="sheet-skillnumber" name="attr_alterationdice" min="1" value="0"/>D </td>
                                <td>+<input type="number" class="sheet-skillnumber" name="attr_alterationpip" min="0" max="2" value="0"/></td>
                                <td>
                                    <input type="number" class="sheet-skillnumber2" name="attr_alterationdice-mod" min="0" value="0"/>D+
                                    <input type="number" class="sheet-skillnumber2" name="attr_alterationpip-mod" min="0" max="2" value="0"/>
                                </td>
                                <td><input type="checkbox" class="sheet-update" name="attr_alteration_update" value="1" checked/><span></span> </td>
                            </tr>

                        </table>
                        <fieldset class="repeating_magicskills">
                            <table class="sheet-attribute_skill" style="border-collapse: collapse;">
                                <tr>
                                    <td><button type="roll" name="roll_magicskill" class="sheet-button2" value='&{template:attrib} {{stat= magic:@{magicskillname}}} {{character= @{character_name}}} {{wound= @{wound_level} (@{wound_effects}) }} {{roll= [[(@{magicskilldice} + @{magicskilldice-mod} + @{wound_effects} + @{gendice} - 1)d6 + 1d6! + @{magicskillpip} + @{magicskilldice-mod} + @{genpip}]] }}'></button></td>
                                    <td><input type="text" class="sheet-skillword" name="attr_magicskillname" placeholder="Skill Name"/></td>
                                    <td><input type="number" class="sheet-skillnumber" name="attr_magicskilldice" min="1" value="0"/>D </td>
                                    <td>+<input type="number" class="sheet-skillnumber" name="attr_magicskillpip" min="0" max="2" value="0"/></td>
                                    <td>
                                        <input type="number" class="sheet-skillnumber2" name="attr_magicskilldice-mod" min="0" value="0"/>D+
                                        <input type="number" class="sheet-skillnumber2" name="attr_magicskillpip-mod" min="0" max="2" value="0"/>
                                    </td>
                                    <td><input type="checkbox" class="sheet-update" name="attr_magicskill_update" value="1" checked/><span></span> </td>
                                </tr>
                            </table>
                        </fieldset>
                    </div>
                </div>
            </div>
        </div>    
    
    
    
    
    
        
    </div>
    
    
    
    
    
    
    
    
    
    
    
    
    <!-- Tab Three -->
    <div class="sheet-tab-content sheet-tab3" name="characterfeatures">
        <div>
            <div class='sheet-border1' >
                <div class="sheet-slant" style="margin-left:15px;width:150px;"><label class="sheet-slant">Advantages</label></div>
                <fieldset class="repeating_Ads">
                    <button type="roll" class="sheet-btn" name="attr_add_show" style="display:inline" value="&{template:attrib} {{character= @{character_name}}} {{stat= @{advantage_name} }} {{note= @{advantages} }}"></button>
                    <input type="text" class="sheet-skillword3" name="attr_advantage_name" value="" style="display:inline" />
                    <input type="number" class="sheet-skillnumber" name="attr_advantage_pips" value="0" style="display:inline" />
                    <input type="checkbox" class="sheet-gear sheet-hider" style="display:inline" name="attr_advantage_open" value="1" checked/><span></span>
                    <div class="sheet-hold">
                        <textarea name="attr_advantages" class="sheet-textarea" style="width:800px"></textarea>
                    </div>
                </fieldset>
                <br>
            </div>
            <div class='sheet-border2'>
                <div class="sheet-slant" style="margin-left:15px;width:150px;"><label class="sheet-slant" style="margin-left:15px;">Disadvantages</label></div>
                <fieldset class="repeating_DisAds">
                    <button type="roll" class="sheet-btn" name="attr_disadd_show" style="display:inline" value="&{template:attrib} {{character= @{character_name}}} {{stat= @{disadvantage_name} }} {{note= @{disadvantages} }}"></button>
                    <input type="text" class="sheet-skillword3" name="attr_disadvantage_name" value="" style="display:inline" />
                    <input type="number" class="sheet-skillnumber" name="attr_disadvantage_pips" value="0" style="display:inline" />
                    <input type="checkbox" class="sheet-gear sheet-hider" style="display:inline" name="attr_disadvantage_open" value="1" checked/><span></span>
                    <div class="sheet-hold">
                        <textarea name="attr_disadvantages" class="sheet-textarea" style="width:800px"></textarea> 
                    </div>
                </fieldset>
                <br>
            </div>
            <div class='sheet-border3'>
                <div class="sheet-slant" style="margin-left:15px;width:150px;"><label class="sheet-slant" style="margin-left:15px;">Special Abilities</label></div>
                <fieldset class="repeating_SpAbil">
                    <button type="roll" class="sheet-btn" name="attr_specadd_show" style="display:inline" value="&{template:attrib} {{character= @{character_name}}} {{stat= @{specialAbilities_name} }} {{note= @{specialAbilities} }}"></button>
                    <input type="text" class="sheet-skillword3" name="attr_specialAbilities_name" value="" style="display:inline" />
                    <input type="number" class="sheet-skillnumber" name="attr_specialAbilities_pips" value="0" style="display:inline" />
                    <input type="checkbox" class="sheet-gear sheet-hider" style="display:inline" name="attr_specialAbilities_open" value="1" checked/><span></span>
                    <div class="sheet-hold">
                        <textarea name="attr_specialAbilities" class="sheet-textarea" style="width:800px"></textarea>  
                    </div>
                </fieldset>
                <br>
            </div>
        </div>
        
        <input type="number" class="sheet-hidden" name="attr_ad_total" value="0"/>
        <input type="number" class="sheet-hidden" name="attr_disad_total" value="0"/>
        <input type="number" class="sheet-hidden" name="attr_specialad_total" value="0"/>
        <h5 style="margin-left:15px;">
            Total Cost
            <input type="number" class="sheet-skillnumber" style="width:60px;margin-left:15px;" name="attr_feature_total" value="@{ad_total} + @{specialad_total} - @{disad_total}" disabled="true"/></h5>
        
    </div>
    <!-- Tab Four --> <!-- Inventory -->
    <div class="sheet-tab-content sheet-tab4" name="equipment_and_ArmorandCyber"> 
            
        <input type="radio" name="attr_block" class="sheet-tab sheet-tab1" value="1" title="Cybernetics" checked="checked" /><span></span>
        <input type="radio" name="attr_block" class="sheet-tab sheet-tab2" value="2" title="Equipment" /><span></span>
        <input type="radio" name="attr_block" class="sheet-tab sheet-tab3" value="3" title="Armor" /><span></span>
        <input type="radio" name="attr_block" class="sheet-tab sheet-tab4" value="4" title="Weapon" /><span></span>
        
        <table style="margin-bottom:-10px;margin-top:-10px;">
            <tr>
                <th><div style="width: 100px; color:black;">Cybernetics</div></th>
                <th><div style="width: 100px; color:black;">Equipment</div></th>
                <th><div style="width: 100px; color:black;">Armor</div></th>
                <th><div style="width: 100px; color:black;">Weapon</div></th>
                <td>money</td>
                <td><input type="number" class="sheet-skillnumber" style="width:80px;" name="attr_money" min="0"/></td>
            </tr>
            <tr>
                <th><input type="number" class="sheet-skillnumber2" style="width:100px;" name="attr_all_wgt" value="@{wgt_carried} + @{Armor_wgt_carried} + @{weapon_wgt_carried}" disabled="true"/><br><div style="color:black;">Total Carried</div></th>
                <td><input type="number" class="sheet-skillnumber3" style="width:100px;" name="attr_wgt_carried" value="0" readonly/><br>Equipment</td>
                <td><input type="number" class="sheet-skillnumber3" name="attr_Armor_wgt_carried" value="0"/><br>Armor</td>
                <td><input type="number" class="sheet-skillnumber3" name="attr_weapon_wgt_carried" value="0"/><br>Weapons</td>
                <td>Strength Damage (D)</td>
                <td><input type="number" class="sheet-skillnumber" style="width:80px;" name="attr_PhysiqueDamage" value="0" /></td>
                <td>Move</td>
                <td><input type="number" class="sheet-skillnumber" style="width:80px;" name="attr_move" min="0" value="10"/></td>
            </tr>
        </table>
        <hr>
        <!--    Cybernetics    -->
        <div class="sheet-tab-content sheet-tab1" style="width:820px">
            <div class="sheet-slant" style="margin-left:15px;width:150px;"><label class="sheet-slant">Cybernetics</label></div>
            <table class="sheet-darktext">
                <tr>
                    <td><button type="roll" class="sheet-btn" name="roll_cyber" value="&{template:attrib} {{character= @{character_name}}} {{stat= @{CyberType} }} {{note= @{cyberNotes} }}"></button></td>
                    <td><input type="text" class="sheet-skillword3" name="attr_CyberType" style="width:200px;"/></td>
                    <td><input type="checkbox" class="sheet-gear" name="attr_cyber_open" value="1"  checked/><span></span> </td>
                </tr>
            </table>
            <input type="checkbox" class="sheet-hider sheet-hidden" name="attr_cyber_open" value="1" checked/><span></span>
            <div class="sheet-hold">
                <table>
                    <tr>
                        <td colspan="2"><textarea class="sheet-textarea" name="attr_cyberNotes" style="width:800px" placeholder="Cybernetics Data"></textarea></td>
                    </tr>
                </table>
            </div>
            <fieldset class="repeating_cyber">
                <table class="sheet-darktext">
                    <tr>
                    <td><button type="roll" class="sheet-btn" name="roll_addcyber" value="&{template:attrib} {{character= @{character_name}}} {{stat= @{addCyberType} }} {{note= @{addcybernotes} }}"></button></td>
                        <td><input type="text" class="sheet-skillword3" name="attr_addCyberType" style="width:200px;"/></td>
                        <td><input type="checkbox" class="sheet-gear" name="attr_cyber_open" value="1"  checked/><span></span> </td>
                    </tr>
                </table>
                <input type="checkbox" class="sheet-hider sheet-hidden" name="attr_cyber_open" value="1" checked/><span></span>
                <div class="sheet-hold">
                    <table>
                        <tr>
                            <td colspan="2"><textarea class="sheet-textarea" name="attr_addcybernotes" style="width:800px" placeholder="Cybernetics Data"></textarea></td>
                        </tr>
                    </table>
                </div>
            </fieldset>
        </div>
        <!--    Equipment    -->
        <div class="sheet-tab-content sheet-tab2" style="width:820px">
            <div class="sheet-slant" style="margin-left:15px;width:150px;"><label class="sheet-slant">Other Equipment</label></div>
            <table class="sheet-darktext">
                <tr>
                    <td><input type="number" class="sheet-hidden" style="width:100px;" name="attr_wgt_stored" value="@{wgt_total} - @{wgt_carried}" disabled="true"/></td>
                    <td><input type="number" class="sheet-hidden" style="width:100px;" name="attr_wgt_total" value="" readonly/></td>
                </tr>
            </table>
            <fieldset class="repeating_otherequip">
                <table class="sheet-darktext">
                    <tr>
                        <td>Type</td>
                        <td><input type="text" class="sheet-skillword3" name="attr_otherequip" style="width:200px;"/></td>
                        <td><input type="number" class="sheet-skillnumber3" name="attr_otherequip_wgt" value="0"/><br>Weight</td>
                        <td>
                            <input type="number" class="sheet-skillnumber3" name="attr_otherequip_amt" value="1"/><br>Amount
                            <input type="number" class="sheet-hidden" name="attr_otherequip_subtotal" value="0"/>
                        </td>
                        <td>
                            <select class="sheet-select1" name="attr_otherequip_carried">
                                <option value="1">Carried</option>
                                <option value="0">Stored</option>
                            </select>
                        </td>
                        <td><input type="number" class="sheet-hidden" name="attr_otherequip_total" value="0"/></td>
                        <td><input type="checkbox" class="sheet-gear" name="attr_otherequip_open" value="1" checked/><span></span> </td>
                    </tr>
                </table>
                <input type="checkbox" class="sheet-hider sheet-hidden" name="attr_otherequip_open" value="1" checked/><span></span>
                <div class="sheet-hold">
                    <table>
                        <tr>
                            <td colspan="2"><textarea class="sheet-textarea" name="attr_otherequipnotes" style="width:800px"/></textarea></td>  
                        </tr>
                    </table>
                </div>
            </fieldset>
        </div> 
        <!--    Armor    -->
        <div class="sheet-tab-content sheet-tab3" style="width:820px">
            <div class="sheet-slant" style="margin-left:15px;width:150px;"><label class="sheet-slant">Armor</label></div>
            <input type="number" class="sheet-hidden" name="attr_Armor_wgt_total" value="0"/>
            <fieldset class="repeating_armor">
                <table>
                    <tr>
                        <td><button type="roll" class="sheet-btn" name="attr_armor_roll" value="&{template:armor} {{note= @{armornotes} }} {{armor= @{Armor} }} {{character= @{character_name} }} {{Physique=  @{Physiquedice}D + @{Physiquepip} }} {{armor= @{armorvalue}D + @{armorvaluepip}}} {{roll= [[(@{Physiquedice} + @{armorvalue})d6 + (@{Physiquepip} + @{armorvaluepip} )]]}}"></button></td>
                        <td><input type="text" class="sheet-skillword" name="attr_Armor" style="width:200px;"/></td>
                        <td><input type="number" class="sheet-skillnumber3" name="attr_Armor_subwgt" value="0"/><br>Weight</td>
                        <td><input type="number" class="sheet-hidden" name="attr_Armor_wgt" value="0"/></td>
                        <td>
                            <select class="sheet-select1" name="attr_Armor_carried">
                                <option value="1">Carried</option>
                                <option value="0">Stored</option>
                            </select>
                        </td>
                        <td><input type="checkbox" class="sheet-gear" name="attr_armor_open" value="1"  checked/><span></span> </td>
                    </tr>
                </table>
                <input type="checkbox" class="sheet-hider sheet-hidden" name="attr_armor_open" value="1" checked/><span></span>
                <div class="sheet-hold">
                    <table class="sheet-darktext">
                        <tr>
                            <td>Armor Value</td>
                            <td><input type="number"  class="sheet-skillnumber" name="attr_armorvalue" min="0" value="0"/>D+<input type="number"  class="sheet-skillnumber" name="attr_armorvaluepip" min="0" max="2" value="0"/></td>
                        </tr>
                        <tr>
                            <td colspan="2"><textarea class="sheet-textarea" name="attr_armornotes"/></textarea></td>  
                        </tr>
                    </table>
                </div>
            </fieldset> 
        </div> 
        <!--    Weapon    -->
        <div class="sheet-tab-content sheet-tab4" style="width:820px">
            <div class="sheet-slant" style="margin-left:15px;width:150px;"><label class="sheet-slant">Weapon</label></div>
            <input type="number" class="sheet-hidden" name="attr_weapon_wgt_total" value="0"/>
            <fieldset class="repeating_weapons">
                <table>
                    <tr>
                        <td><button type="roll" class="sheet-btn" value="&{template:weapon} {{weapon= @{weapon_name} }} {{character= @{character_name} }} {{wound= @{wound_level} (@{wound_effects}) }} {{range= @{rangeS}/@{rangeM}/@{rangeL} }} {{attack= [[ (@{attackdice} + @{attackmodice} + @{wound_effects} - 1)d6 + 1d6! + @{attackpip} + @{attackmodpip} ]] }}{{damage= [[(@{dmg})d6 + @{dmgpip} + @{dmg_Physique}]] }} {{location= [[1d6]]}} {{notes= @{weapon_note}}}"></button></td>
                        <td colspan="2"><input type="text" class="sheet-skillword" name="attr_weapon_name" style="width:200px;"/></td>
                        <td>
                            <select class="sheet-select1" name="attr_weapon_carried">
                                <option value="1">Carried</option>
                                <option value="0">Stored</option>
                            </select>
                        </td>
                        <td><input type="checkbox" class="sheet-gear" name="attr_weapon_open" value="1" checked/><span></span> </td>
                    </tr>
                </table>
                <input type="checkbox" class="sheet-hider sheet-hidden" name="attr_weapon_open" value="1" checked/><span></span>
                <div class="sheet-hold">
                    <table class="sheet-darktext" style="border-collapse: collapse;">
                        <tr>
                            <td>Skill</td>
                            <td>Skill Rating</td>
                            <td>Skill Modifier</td>
                            <td colspan="3">Weight</td>
                        </tr>
                        <tr>
                            <td>
                                <select class="sheet-select" name="attr_weapon_skill_select" >
                                    <option value=""></option>
                                    <option value="1">Brawling</option>
                                    <option value="2">Dodge</option>
                                    <option value="3">Marksmanship</option>
                                    <option value="4">Melee Combat</option>
                                    <option value="5">Missile Weapons</option>
                                    <option value="6">Throwing</option>
                                </select>
                            </td>
                            <td>
                                <input type="number" class="sheet-skillnumber" name="attr_attackdice" value="0" readonly/>D+
                                <input type="number" class="sheet-skillnumber" name="attr_attackpip" value="0" readonly/>
                            </td>
                            <td>
                                <input type="number" class="sheet-skillnumber2" name="attr_attackmodice" value="0" />D+
                                <input type="number" class="sheet-skillnumber2" name="attr_attackmodpip" value="0"/>
                            </td>
                            <td colspan="3">
                                <input type="number" class="sheet-skillnumber" style="width:80px;" name="attr_weapon_subwgt" value="0"/>
                                <input type="number" class="sheet-hidden" name="attr_weapon_wgt" value="0"/>
                            </td>
                        </tr>
                        <tr>
                            <td><input type="number" class="sheet-skillnumber" name="attr_dmg" min="0" value="0"/>D+<input type="number" class="sheet-skillnumber" name="attr_dmgpip" min="0" max="2" value="0"/></td>
                            <td><input type="checkbox" class="sheet-" name="attr_dmg_Physique" value="(@{PhysiqueDamage} + @{wound_effects})d6"/></td>
                            <td><input type="number" class="sheet-skillnumber" name="attr_ammo" min="0" value="0"/></td>
                            <td>
                                <input type="number" class="sheet-skillnumber" style="width:80px" name="attr_rangeS" min="0"/> /
                                <input type="number" class="sheet-skillnumber" style="width:80px" name="attr_rangeM" min="0"/> /
                                <input type="number" class="sheet-skillnumber" style="width:80px" name="attr_rangeL" min="0"/>
                            </td>
                        </tr>
                        <tr>
                            <td>Damage</td>
                            <td>Add SD?</td>
                            <td>Ammo</td>
                            <td colspan="3">Range</td>
                        </tr>
                        <tr>
                            <td colspan="6"><textarea class="sheet-textarea2" name="attr_weapon_note" style="width:800px" placeholder="Description" /></textarea></td>
                        </tr>
                    </table>
                </div>
            </fieldset> 
        </div>
    </div>
    <!-- Tab Five-->
    <div class="sheet-tab-content sheet-tab5" name="Vehicle">
        <h1>Vehicle</h1>
        <div class="sheet-slant2" style="margin-left:15px;width:150px;"><label class="sheet-slant">Name</label></div>
        <input type="text" class="sheet-attribword" name="attr_Vehiclename" style="width:100%;" placeholder="Vehicle Name"/></label>
        <div class='sheet-2colrow'>
            <div class='sheet-col'>
                <table style="margin-top:-10px; margin-left:-10px;" class="sheet-darktext">
                    <tr>
                        <td>
                            <div class="sheet-slant2" style="margin-left:15px;width:150px;"><label class="sheet-slant">Type</label></div>
                            <select name="attr_VehicleType" class="sheet-select" style="width:100%;">
                                <option value="Ground">Ground</option>
                                <option value="Space">Space</option>
                                <option value="Submersive">Submersive</option>
                                <option value="Water Craft">Water Craft</option>
                                <option value="Air">Air</option>
                            </select>
                        </td>
                        <td>
                            <div class="sheet-slant2" style="margin-left:15px;width:150px;"><label class="sheet-slant">Scale</label></div>
                            <select name="attr_Scale" class="sheet-select" style="width:100%;"/>
                                <option value="0">Personal</option>
                                <option value="6">Civilian</option>
                                <option value="14">Military Planetary Vehicle</option>
                                <option value="20">MEKA Walker</option>
                                <option value="24">Space Craft</optional>
                                <option value="50">Capital Class</option>
                            </select>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <div class="sheet-slant2" style="margin-left:15px;width:150px;"><label class="sheet-slant">Length</label></div>
                            <input type="text" class="sheet-skillword" name="attr_Length" style="width:100%;"/>
                        </td>
                        <td>
                            <div class="sheet-slant2" style="margin-left:15px;width:150px;"><label class="sheet-slant">Height</label></div>
                            <input type="text" class="sheet-skillword" name="attr_Height" style="width:100%;"/>
                        </td>
                    </tr>
                    <tr>
                        <td colsapan="2">
                            <p style="font-size:0.9em;"><b>Length and height:</b> In meters.</p>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <div class="sheet-slant2" style="margin-left:15px;width:150px;"><label class="sheet-slant">Tonnage</label></div>
                            <input type="text" class="sheet-skillword" name="attr_Tonnage" style="width:100%;"/>
                            <sub>Curb vs gross weight.</sub>
                        </td>
                        <td>
                            <div class="sheet-slant2" style="margin-left:15px;width:150px;"><label class="sheet-slant">Crew</label></div>
                            <input type="text" class="sheet-skillword" name="attr_Crew" style="width:100%;"/>
                            <sub>Skeleton and Full</sub>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <div class="sheet-slant2" style="margin-left:15px;width:150px;"><label class="sheet-slant">Passengers</label></div>
                            <input type="text" class="sheet-skillword" name="attr_Passengers" style="width:100%;"/>
                            <sub>Could be troops as well</sub>
                        </td>
                        <td>
                            <div class="sheet-slant2" style="margin-left:15px;width:150px;"><label class="sheet-slant">Cover</label></div>
                                <Select class="sheet-select" name="attr_Cover" style="width:100%;"/>
                                    <option value="None">None</option>
                                    <option value="Partial">Partial</option>
                                    <Option value="Full">Full</Option>
                                </select>
                            <sub>None, Partial or Full</sub>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <div class="sheet-slant2" style="margin-left:15px;width:150px;"><label class="sheet-slant">Planet Move</label></div>
                            <input type="text" class="sheet-skillword" name="attr_PlanetMove" style="width:100%;"/>
                            <sub>Meters</sub>
                        </td>
                        <td>
                            <div class="sheet-slant2" style="margin-left:15px;width:150px;"><label class="sheet-slant">Space Move</label></div>
                            <input type="text" class="sheet-skillword" name="attr_SpaceMove" style="width:100%;"/>
                            <sub>Units of Space (abstract)</sub>
                        </td>
                    </tr>
                </table>
                <div name="Hull"> 
                <div class="sheet-slant2" style="margin-left:15px;width:150px;"><label class="sheet-slant">Shields</label></div>
                <table>
                    <tr>
                        <td></td>
                        <td></td>
                        <td><button type='roll' name="roll_shield_fore" class="sheet-button" value="&{template:shield} {{stat= Shield}} {{character= @{character_name} in @{Vehiclename} uses the Fore Shield}} {{roll= [[ @{shield_fore}d6]]}}">Fore</button></td>
                        <td></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td><button type='roll' name="roll_shield_port" class="sheet-button" value="&{template:shield} {{stat= Shield}} {{character= @{character_name} in @{Vehiclename} uses the Port Shield}} {{roll= [[@{shield_port}d6]]}}">Port</button></td></td>
                        <td></td>
                        <th><input type="number" class="sheet-skillnumber2" name="attr_shield_fore" min="0" value="0"/></th>
                        <td></td>
                        <td><button type='roll' name="roll_shield_starboard" class="sheet-button" value="&{template:shield} {{stat= Shield}} {{character= @{character_name} in @{Vehiclename}}} {{roll= [[ @{shield_starboard}d6]]}}">Starboard</button></td></td>
                    </tr>
                    <tr>
                        <th><input type="number" class="sheet-skillnumber2" name="attr_shield_port" min="0" value="0"/></th>
                        <td></td>
                        <th><input type="number" class="sheet-skillnumber" name="attr_shield_total" min="0" value="0"/></th>
                        <td></td>
                        <th><input type="number" class="sheet-skillnumber2" name="attr_shield_starboard" min="0" value="0"/></th>
                    </tr>
                    <tr>
                        <td></td>
                        <td></td>
                        <td><button type='roll' name="roll_shield_aft" class="sheet-button" value="&{template:shield} {{stat= Shield}} {{character= @{character_name} in @{Vehiclename} uses the Aft Shield}} {{roll= [[ @{shield_aft}d6]]}}">Aft</button></td></td>
                        <td></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td></td>
                        <td></td>
                        <th><input type="number" class="sheet-skillnumber2" name="attr_shield_aft" min="0" value="0"/></th>
                        <td></td>
                        <td></td>
                    </tr>
                </table>
                <div class="sheet-slant2" style="margin-left:15px;width:150px;"><label class="sheet-slant">Hull</label></div>
                <table style="margin-top:-1px; margin-left:-1px;" class="sheet-darktext">
                    <tr style="padding-bottom:0px">
                        <td><button type='roll' name="roll_hull" class="sheet-button" value="&{template:armor} {{character= @{character_name} in @{Vehiclename}}} @{addhull} @{addvarmor}">Seperate</button></td>
                        <td><button type='roll' name="roll_hull_armor" class="sheet-button" value="&{template:armor} {{character= @{character_name} in @{Vehiclename}}} {{hull=  @{hulldice}D6+@{hullpip} }} {{varmor= @{varmordice}D6+@{varmorpip} }}{{total= [[(@{hulldice} + @{varmordice})d6 + (@{hullpip} + @{varmorpip})]] }}">All</button></td>
                    </tr>
                    <tr>
                        <td><input type="checkbox" class="sheet-" name="attr_addhull" value="{{hull= @{hulldice}D+@{hullpip} }} {{hullroll= [[@{hulldice}d6+@{hullpip}]] }}" checked><span></span></td>
                        <td>Hull</td>
                        <td>
                            <input type="number" class="sheet-skillnumber" name="attr_hulldice" min="0" value="0"/>D+
                            <input type="number" class="sheet-skillnumber" name="attr_hullpip" min="0" max="2" value="0"/>
                        </td>
                    </tr>
                    <tr>
                        <td><input type="checkbox" class="sheet-" name="attr_addvarmor" value="{{armor= @{varmordice}D+@{varmorpip} }} {{armorroll= [[@{varmordice}d6+@{varmorpip}]] }}"><span></span></td>
                        <td>Armor</td>
                        <td>
                            <input type="number" class="sheet-skillnumber" name="attr_varmordice" min="0" value="0"/>D+
                            <input type="number" class="sheet-skillnumber" name="attr_varmorpip" min="0" max="2" value="0"/>
                        </td>
                    </tr>
                </table>
                </div>
                <div name="dedicated"> 
                    <table style="margin-top:-1px; margin-left:-1px; width:100%;" class="sheet-darktext">
                        <tr style="padding-bottom:0px">
                            <td><button type='roll' name="roll_sensor" class="sheet-button" value='&{template:attrib} {{stat= @{Vehiclename}:Sensors }} {{character= @{character_name} }} {{roll= [[ (@{dedicateddice} + @{dedicatedmoddice} - 1)d6 + 1d6! + ( @{dedicatedpip} + @{dedicatedmodpip} ) ]] }}'>Sensor</button></td>
                            <td><input type="number" class="sheet-skillnumber" name="attr_dedicateddice" min="0" value="0"/>D+<input type="number" class="sheet-skillnumber" name="attr_dedicatedpip" min="0" max="2" value="0"/></td>
                            <td><input type="number" class="sheet-skillnumber2" name="attr_dedicatedmoddice" min="0" value="0"/>D+<input type="number" class="sheet-skillnumber2" name="attr_dedicatedmodpip" min="0" max="2" value="0"/></td>
                        </tr>
                    </table>
                </div> 
            </div>
            <div class='sheet-col'>
                <div class="sheet-slant2" style="margin-left:15px;width:150px;"><label class="sheet-slant">Vehicle Description</label></div>
                <textarea class="sheet-textarea" name="attr_vehicledescription" style="height:400px; padding-top:2px; padding-bottom:2px;"></textarea>
                
                <div name="vehicleskill"> 
                    <div class="sheet-slant2" style="margin-left:15px;width:150px;"><label class="sheet-slant">Pilot</label></div>
                    <fieldset class="repeating_pilot">
                        <table class="sheet-darktext" style="border-collapse:collapse;">
                            <tr>
                                <td><button type="roll" name="roll_vehicleskill" class="sheet-button2" value='&{template:attrib} {{stat= @{Vehiclename}:@{pilot_skill_select} }} {{character= @{character_name} }} {{roll= [[ (@{vehicleskilldice} + @{vehiclemoddice} - 1)d6 + 1d6! + ( @{vehicleskillpip} + @{vehiclemodpip} ) ]] }}'></button></td>
                                <td>
                                    <select class="sheet-select" name="attr_pilot_skill_select" >
                                        <option value="0"></option>
                                        <option value="Navigation">Navigation</option>
                                        <option value="Piloting">Piloting</option>
                                        <option value="Vehicle">Vehicle</option>
                                     </select>
                                </td>
                                <td>
                                    <input type="number" class="sheet-skillnumber" name="attr_vehicleskilldice" value="0" readonly/>D+
                                    <input type="number" class="sheet-skillnumber" name="attr_vehicleskillpip" value="0" readonly/>
                                </td>
                                <td>
                                    <input type="number" class="sheet-skillnumber2" name="attr_vehiclemoddice" value="0"/>D+
                                    <input type="number" class="sheet-skillnumber2" name="attr_vehiclemodpip" value="0"/>
                                </td>
                            </tr>
                            <tr>
                                <td></td>
                                <td></td>
                                <td>Skill</td>
                                <td>Mod</td>
                            </tr>
                        </table>
                    </fieldset>
                    <div class="sheet-slant2" style="margin-left:15px;width:150px;"><label class="sheet-slant">Vehicle Skills</label></div>
                    <fieldset class="repeating_vehicleskill">
                        <table class="sheet-darktext" style="border-collapse:collapse;">
                            <tr>
                                <td><button type="roll" name="roll_vehicle_skill" class="sheet-button2" value='&{template:attrib} {{stat= @{Vehiclename}:@{vehicle_skill_name} }} {{character= @{Vehiclename} }} {{roll= [[ (@{vehicleskilldice} + @{vehiclemoddice} - 1)d6 + 1d6! + ( @{vehicleskillpip} + @{vehiclemodpip} ) ]] }}'></button></td>
                                <td>
                                    <input type="text" class="sheet-skillword" name="attr_vehicle_skill_name" placeholder="Skill Name" /> 
                                </td>
                                <td>
                                    <input type="number" class="sheet-skillnumber" name="attr_vehicleskilldice" value="0" />D+
                                    <input type="number" class="sheet-skillnumber" name="attr_vehicleskillpip" value="0" />
                                </td>
                                <td>
                                    <input type="number" class="sheet-skillnumber2" name="attr_vehiclemoddice" value="0"/>D+
                                    <input type="number" class="sheet-skillnumber2" name="attr_vehiclemodpip" value="0"/>
                                </td>
                            </tr>
                            <tr>
                                <td></td>
                                <td></td>
                                <td>Skill</td>
                                <td>Mod</td>
                            </tr>
                        </table>
                    </fieldset>
                </div>
                
                <div class="sheet-slant2" style="margin-left:15px;width:150px;"><label class="sheet-slant">Vehicle Weapon</label></div>
                <table>
                    <tr>
                        <td><button type="roll" name="roll_vweapon" class="sheet-btn" value="&{template:weapon} {{weapon= @{vweapon_name} }} {{character= @{character_name} in @{Vehiclename} }}{{range= @{vrangeS}/@{vrangeM}/@{vrangeL} }}{{attack= [[ (@{vattackdice} + @{vattackmodice} - 1)d6 + 1d6! + @{vattackpip} + @{vattackmodpip} ]] }}{{damage= [[@{vdmg}d6 + @{vdmgpip}]] }} {{location= [[1d6]]}} {{notes= @{vweapon}}}"></button></td>
                        <td><input type="text" class="sheet-skillword" name="attr_vweapon_name"/></td>
                        <td><input type="checkbox" class="sheet-gear" name="attr_vweapon_open" value="1" checked/><span></span></td>
                    </tr>
                </table>
                <input type="checkbox" class="sheet-hider sheet-hidden" name="attr_vweapon_open" value="1" checked/><span></span>
                <div class="sheet-hold">
                    <table class="sheet-darktext">
                        <tr>
                            <td></td>
                            <td></td>
                            <td>Modifier</td>
                        </tr>
                        <tr>
                            <td>Skill</td>
                            <td>
                                <select class="sheet-select" name="attr_vweapon_skill_select" >
                                    <option value=""></option>
                                    <option value="1">Brawling</option>
                                    <option value="2">Dodge</option>
                                    <option value="3">Marksmanship</option>
                                    <option value="4">Melee Combat</option>
                                    <option value="5">Missile Weapons</option>
                                    <option value="6">Throwing</option>
                                </select>
                                <input type="number" class="sheet-skillnumber" name="attr_vattackdice" value="0" readonly/>
                                <input type="number" class="sheet-skillnumber" name="attr_vattackpip" value="0" readonly/>
                            </td>
                            <td>
                                <input type="number" class="sheet-skillnumber2" name="attr_vattackmodice" value="0" />D+<input type="number" class="sheet-skillnumber2" name="attr_vattackmodpip" value="0"/>
                            </td>
                        </tr>
                        <tr>
                            <td>Damage</td>
                            <td>
                                <input type="number" class="sheet-skillnumber" name="attr_vdmg" min="0" value="0"/>D+<input type="number" class="sheet-skillnumber" name="attr_vdmgpip" min="0" max="2" value="0"/>
                            </td>
                        </tr>
                        <tr>
                            <td>Range</td>
                            <td>
                                <input type="number" class="sheet-skillnumber" name="attr_vrangeS" min="0" value="0"/> 
                                <input type="number" class="sheet-skillnumber" name="attr_vrangeM" min="0" value="0"/> 
                                <input type="number" class="sheet-skillnumber" name="attr_vrangeL" min="0" value="0"/>
                            </td>
                        </tr>
                        <tr>
                            <td>Ammo</td>
                            <td><input type="number" class="sheet-skillnumber" name="attr_vammo" min="0" value="0"/></td>
                        </tr>
                        <tr>
                            <td colspan="3"><textarea type="text" class="sheet-textarea2" name="attr_vweapon" placeholder="Description" /></textarea></td>
                        </tr>
                    </table>
                </div>
                <fieldset class="repeating_vweapon">
                    <table>
                        <tr>
                            <td><button type="roll" name="roll_vweapon_add" class="sheet-btn" value="&{template:weapon} {{weapon= @{vweapon_name} }} {{character= @{character_name} in @{Vehiclename} }}{{range= @{vrangeS}/@{vrangeM}/@{vrangeL} }}{{attack= [[ (@{vattackdice} + @{vattackmodice} - 1)d6 + 1d6! + @{vattackpip} + @{vattackmodpip} ]] }}{{damage= [[@{vdmg}d6 + @{vdmgpip}]] }} {{location= [[1d6]]}} {{notes= @{vweapon}}}"></button></td>
                            <td><input type="text" class="sheet-skillword" name="attr_vweapon_name"/></td>
                            <td><input type="checkbox" class="sheet-gear" name="attr_vweapon_open" value="1" checked/><span></span></td>
                        </tr>
                    </table>
                    <input type="checkbox" class="sheet-hider sheet-hidden" name="attr_vweapon_open" value="1" checked/><span></span>
                    <div class="sheet-hold">
                        <table class="sheet-darktext">
                            <tr>
                                <td></td>
                                <td></td>
                                <td>Modifier</td>
                            </tr>
                            <tr>
                                <td>Skill</td>
                                <td>
                                    <select class="sheet-select" name="attr_vweapon_skill_select" >
                                        <option value=""></option>
                                        <option value="1">Brawling</option>
                                        <option value="2">Dodge</option>
                                        <option value="3">Marksmanship</option>
                                        <option value="4">Melee Combat</option>
                                        <option value="5">Missile Weapons</option>
                                        <option value="6">Throwing</option>
                                    </select>
                                    <input type="number" class="sheet-skillnumber" name="attr_vattackdice" value="0" readonly/>
                                    <input type="number" class="sheet-skillnumber" name="attr_vattackpip" value="0" readonly/>
                                </td>
                                <td>
                                    <input type="number" class="sheet-skillnumber2" name="attr_vattackmodice" value="0" />D+<input type="number" class="sheet-skillnumber2" name="attr_vattackmodpip" value="0"/>
                                </td>
                            </tr>
                            <tr>
                                <td>Damage</td>
                                <td>
                                    <input type="number" class="sheet-skillnumber" name="attr_vdmg" min="0" value="0"/>D+<input type="number" class="sheet-skillnumber" name="attr_vdmgpip" min="0" max="2" value="0"/>
                                </td>
                            </tr>
                            <tr>
                                <td>Range</td>
                                <td>
                                    <input type="number" class="sheet-skillnumber" name="attr_vrangeS" min="0"/> 
                                    <input type="number" class="sheet-skillnumber" name="attr_vrangeM" min="0"/> 
                                    <input type="number" class="sheet-skillnumber" name="attr_vrangeL" min="0"/>
                                </td>
                            </tr>
                            <tr>
                                <td>Ammo</td>
                                <td><input type="number" class="sheet-skillnumber" name="attr_vammo" min="0" value="0"/></td>
                            </tr>
                            <tr>
                                <td colspan="3"><textarea type="text" class="sheet-textarea2" name="attr_vweapon" placeholder="Description" /></textarea></td>
                            </tr>
                        </table>
                    </div>
                    </fieldset> 
               
               
                    <img src="http://ogc.rpglibrary.org/images/a/a4/D6_Adventure_cover.jpg"/>
               
            </div>
        </div>
        <div name="footer" style="text-align: Right;">
            
        </div>
    </div>
    <!-- Tab Six-->
    <div class="sheet-tab-content sheet-tab6" name="Advancement">
        <h2 align="center">Experince</h2>
        <table class="sheet-darktext" style="width:800px;">
            <tr>
                <td><input type="number" style="width:80px;" class="sheet-advance" name="attr_xp_invest" value="@{xp_spent_total}" disabled="true"/><br>Veteran Level</td>
                <td><input type="number" style="width:80px;" class="sheet-advance" name="attr_xp_earned_total" value="5"/><br>Total Earned</td>
                <td><input type="number" style="width:80px;" class="sheet-advance" name="attr_xp_spent_total" readonly/><br>Total Spent</td>
                <td><input type="number" style="width:80px;" class="sheet-advance" name="attr_remaining" value="@{xp_earned_total} - (@{xp_spent_total} + @{characterPoints})"disabled="true"/><br>Remaining</td>
                <td><input type="number" class="sheet-skillnumber" style="width:80px;" name="attr_fatePoints" min="0" value="1"/><br>Fate Points</td>
                <td><input type="number" class="sheet-skillnumber" style="width:80px;" name="attr_characterPoints" min="0" value="0"/><br>Character Points Spent</td>
            </tr>
        </table>
        <hr>
        <table class="sheet-darktext" style="width:800px;">
            <tr>
                <td style="width:400px;">Trait</td>
                <td style="width:120x;">Cost</td>
            </tr>
        </table>
        <fieldset class="repeating_xp">
            <table>
                <tr>
                    <td><input type="text" class="sheet-advance" style="width:400px;" name="attr_Trait" /></td>
                    <td><input type="number" class="sheet-advance" style="width:120px;" name="attr_cost" value="0"/></td>
                </tr>
            </table>
        </fieldset>
    
        <div>TheAaronSheet :: <a href="https://github.com/shdwjk/TheAaronSheet">https://github.com/shdwjk/TheAaronSheet</a></div>
    </div>

</div>
<!--Roll Templates-->
<div class="sheet-hidden">
    <rolltemplate class="sheet-rolltemplate-dscreen">
        <div class="sheet-din">
            <h1>{{screen}}</h1>
            <p>{{story}}</p>
            <!--  need to list what margin success looks like for this ability>> 
            <table>
                <tr>
                    <th></th>
                </tr>
                <tr>
                    <td> </td> 
                </tr> 
            </table> -->
        </div>
    </rolltemplate>
    <rolltemplate class="sheet-rolltemplate-msg"><!-- Displays incoming messages from the GM.-->
        <div class="sheet-charname" > 
            <div class="sheet-circle"></div>
            <p>Incoming Msg>>>>>>>>>>></p> 
            {{#character}}
            from:<span style="color:LightSkyBlue">{{character}}</span> 
            {{/character}}
            <div class="sheet-bubble">
                {{msg}}
            </div>
        </div>
    </rolltemplate>
    <rolltemplate class="sheet-rolltemplate_sensor_message"><!--Sensor messges-->
        <div></div>
    </rolltemplate>
    <rolltemplate class="sheet-rolltemplate-weapon">
        <table class="sheet-weaponattack">
            <tr>
                <th colspan="2">{{weapon}}</th>
            </tr>
            <tr>
                <td colspan="2"><i><b>{{character}}</b> attacks with {{weapon}}</i></td>
            </tr>
            <tr>
                <td>Wounds</td>
                <td>{{wound}}</td>
            </tr>
            {{#range}}
            <tr>
                <td><b>Range</b></td>
                <td><b>{{range}}</b></td>
            </tr>
            {{/range}}
            <tr>
                <td><span class="sheet-tcat"><b>Attack:</b> </span> </td>
                <td>{{attack}} </td>
            </tr>
            <tr>
                <td><span class="sheet-tcat"><b>Damage:</b> </span>
                <td>{{damage}}</td>
            </tr>
            <tr>
                <td colspan="2"><span class="sheet-tcat"><b>Notes:</b> </span><i>{{notes}}</i></td>
            </tr>
        </table>
    </rolltemplate>
    <rolltemplate class="sheet-rolltemplate-armor">
        <table class="sheet-armor">
            <tr>
                <th colspan="3">{{character}}</th>
            </tr>
            <tr>
                <td colspan="3"><i><b>{{character}}</b> resist Damage!</i></td>
            </tr>
            {{#Physique}}
            <tr>
                <td><span class="sheet-tcat"><b>Physique</b> </span> </td>
                <td>{{Physique}}</td>
                <td></td>
            </tr>
            {{/Physique}}
            
            {{#total}}
            <tr>
                <td><span class="sheet-tcat"><b>Hull</b> </span>
                <td>{{hull}}</td>
                <td></td>
            </tr>
            <tr>
                <td><span class="sheet-tcat"><b>Armor</b> </span>
                <td>{{varmor}}</td>
                <td></td>
            </tr>
            <tr>
                <td><span class="sheet-tcat"><b>Roll</b> </span>
                <td>{{total}}</td>
                <td></td>
            </tr>
            {{/total}}
            {{#hullroll}}
            <tr>
                <td><span class="sheet-tcat"><b>Hull</b> </span>
                <td>{{hull}}</td>
                <td>{{hullroll}}</td>
            </tr>
            {{/hullroll}}
            {{#armor}}
            <tr>
                <td><span class="sheet-tcat"><b>Armor</b> </span>
                <td>{{armor}}</td>
                <td>{{armorroll}}</td>
            </tr>
            {{/armor}}
            {{#shieldroll}}
            <tr>
                <td><span class="sheet-tcat"><b>Shield</b> </span>
                <td>{{shield}}</td>
                <td>{{shieldroll}}</td>
            </tr>
            {{/shieldroll}}
            {{#roll}}
            <tr>
                <td><span class="sheet-tcat"><b>Roll</b> </span>
                <td>{{roll}}</td>
                <td></td>
            </tr>
            {{/roll}}
            {{#note}}
            <tr>
                <td colspan="3"><span class="sheet-tcat"><b>Notes:</b> </span><i>{{note}}</i></td>
            </tr>
            {{/note}}
        </table>
    </rolltemplate>
    <rolltemplate class="sheet-rolltemplate-attrib">
        <table class="sheet-attrib">
            <tr>
                <th colspan="2">{{stat}}</th>
            </tr>
            <tr>
                <td colspan="2"><i>{{character}}</i></td>
            </tr>
            {{#roll}}
            <tr>
                <td>Roll</td>
                <td><b>{{roll}}</b></td>
            </tr>
            {{/roll}}
            {{#wound}}
            <tr>
                <td>Wounds</td>
                <td>{{wound}}</td>
            </tr>
            {{/wound}}
            {{#note}}
            <tr>
                <td colspan="2">{{note}}</td>
            </tr>
            {{/note}}
        </table>
    </rolltemplate>
    <rolltemplate class="sheet-rolltemplate-shield">
        <table class="sheet-shield">
            <tr>
                <th colspan="2">{{stat}}</th>
            </tr>
            <tr>
                <td colspan="2"><i>{{character}}</i></td>
            </tr>
            <tr>
                <td>Roll</td>
                <td><b>{{roll}}</b></td>
            </tr>
        </table>
    </rolltemplate>
</div>
<!-- Sheet Worker Scripts -->
<script type="text/worker">
    //general update update
on("change:gen_update", function() {
    getAttrs(["gendice", "genpip"], function(values) {
        setAttrs({
            gendice: 0, 
            genpip: 0
        });
    });
});
    //skill update
    // Presenseskills Presense_update
on("change:Presense_update", function() {
    getAttrs(["Presensedice", "Presensepip"], function(values) {
        setAttrs({
            animaldice: +values.Presensedice, 
            animalpip: +values.Presensepip,
            Charmdice: +values.Presensedice, 
            Charmpip: +values.Presensepip,
            Commanddice: +values.Presensedice, 
            Commandpip: +values.Presensepip,
            Condice: +values.Presensedice, 
            Conpip: +values.Presensepip,
            Intimidationdice: +values.Presensedice, 
            Intimidationpip: +values.Presensepip,
            Disguisedice: +values.Presensedice, 
            Disguisepip: +values.Presensepip,
            Willpowerdice: +values.Presensedice, 
            Willpowerpip: +values.Presensepip,
            repeating_Presenseskills_mechskilldice: +values.Presensedice, 
            repeating_Presenseskills_mechskillpip: +values.Presensepip
        });
    });
});
on("change:animal_update", function() {
    getAttrs(["Presensedice", "Presensepip"], function(values) {
        setAttrs({
            animaldice: +values.Presensedice, 
            animalpip: +values.Presensepip
        });
    });
});
on("change:Charm_update", function() {
    getAttrs(["Presensedice", "Presensepip"], function(values) {
        setAttrs({
            Charmdice: +values.Presensedice, 
            Charmpip: +values.Presensepip
        });
    });
});
on("change:Command_update", function() {
    getAttrs(["Presensedice", "Presensepip"], function(values) {
        setAttrs({
            Commanddice: +values.Presensedice, 
            Commandpip: +values.Presensepip
        });
    });
});
on("change:Con_update", function() {
    getAttrs(["Presensedice", "Presensepip"], function(values) {
        setAttrs({
            Condice: +values.Presensedice, 
            Conpip: +values.Presensepip
        });
    });
});
on("change:Disguise_update", function() {
    getAttrs(["Presensedice", "Presensepip"], function(values) {
        setAttrs({
            Disguisedice: +values.Presensedice, 
            Disguisepip: +values.Presensepip
        });
    });
});
on("change:Intimidation_update", function() {
    getAttrs(["Presensedice", "Presensepip"], function(values) {
        setAttrs({
            Intimidationdice: +values.Presensedice, 
            Intimidationpip: +values.Presensepip
        });
    });
});
on("change:Willpower_update", function() {
    getAttrs(["Presensedice", "Presensepip"], function(values) {
        setAttrs({
            Willpowerdice: +values.Presensedice, 
            Willpowerpip: +values.Presensepip
        });
    });
});
on("change:repeating_Presenseskills:mechskill_update", function() {
    getAttrs(["Presensedice", "Presensepip"], function(values) {
        setAttrs({
            repeating_Presenseskills_mechskilldice: +values.Presensedice, 
            repeating_Presenseskills_mechskillpip: +values.Presensepip
        });
    });
});
    // Coordination Coordination_update
on("change:Coordination_update", function() {
    getAttrs(["Coordinationdice", "Coordinationpip"], function(values) {
        setAttrs({

            missiledice: +values.Coordinationdice, 
            missilepip: +values.Coordinationpip,
            Marksmanshipdice: +values.Coordinationdice, 
            Marksmanshippip: +values.Coordinationpip,
            lockpickingdice: +values.Coordinationdice, 
            lockpickingpip: +values.Coordinationpip,
            Pilotingdice: +values.Coordinationdice, 
            Pilotingpip: +values.Coordinationpip,
            sleightdice: +values.Coordinationdice, 
            sleightpip: +values.Coordinationpip,
            throwingdice: +values.Coordinationdice, 
            throwingpip: +values.Coordinationpip,
            repeating_Coordinationskills_techskilldice: +values.Coordinationdice, 
            repeating_Coordinationskills_techskillpip: +values.Coordinationpip
            
        });
    });
});
on("change:missile_update", function() {
    getAttrs(["Coordinationdice", "Coordinationpip"], function(values) {
        setAttrs({
            missiledice: +values.Coordinationdice, 
            missilepip: +values.Coordinationpip
        });
    });
});
on("change:Marksmanship_update", function() {
    getAttrs(["Coordinationdice", "Coordinationpip"], function(values) {
        setAttrs({
            Marksmanshipdice: +values.Coordinationdice, 
            Marksmanshippip: +values.Coordinationpip
        });
    });
});
on("change:lockpicking_update", function() {
    getAttrs(["Coordinationdice", "Coordinationpip"], function(values) {
        setAttrs({
            lockpickingdice: +values.Coordinationdice, 
            lockpickingpip: +values.Coordinationpip
        });
    });
});
on("change:Piloting_update", function() {
    getAttrs(["Coordinationdice", "Coordinationpip"], function(values) {
        setAttrs({
            Pilotingdice: +values.Coordinationdice, 
            Pilotingpip: +values.Coordinationpip
        });
    });
});
on("change:sleight_update", function() {
    getAttrs(["Coordinationdice", "Coordinationpip"], function(values) {
        setAttrs({
            sleightdice: +values.Coordinationdice, 
            sleightpip: +values.Coordinationpip
        });
    });
});
on("change:throwing_update", function() {
    getAttrs(["Coordinationdice", "Coordinationpip"], function(values) {
        setAttrs({
            throwingdice: +values.Coordinationdice, 
            throwingpip: +values.Coordinationpip
        });
    });
});
on("change:repeating_Coordinationskills:techskill_update", function() {
    getAttrs(["Coordinationdice", "Coordinationpip"], function(values) {
        setAttrs({
            repeating_Coordinationskills_techskilldice: +values.Coordinationdice, 
            repeating_Coordinationskills_techskillpip: +values.Coordinationpip
        });
    });
});
    // Knowledge knowledge_update
on("change:knowledge_update", function() {
    getAttrs(["knowledgedice", "knowledgepip"], function(values) {
        setAttrs({
            Businessdice: +values.knowledgedice, 
            Businesspip: +values.knowledgepip,
            demolitionsdice: +values.knowledgedice, 
            demolitionspip: +values.knowledgepip,
            forgerydice: +values.knowledgedice,
            forgerypip: +values.knowledgepip,
            languagesdice: +values.knowledgedice, 
            languagespip: +values.knowledgepip,
            medicinedice: +values.knowledgedice, 
            medicinepip: +values.knowledgepip,
            Navigationdice: +values.knowledgedice, 
            Navigationpip: +values.knowledgepip,
            scholardice: +values.knowledgedice, 
            scholarpip: +values.knowledgepip,
            Securitydice: +values.knowledgedice, 
            Securitypip: +values.knowledgepip,
            Techdice: +values.knowledgedice, 
            Techpip: +values.knowledgepip,
            repeating_knowledgeskills_knowskilldice: +values.knowledgedice, 
            repeating_knowledgeskills_knowskillpip: +values.knowledgepip
            
        });
    });
});
on("change:Business_update", function() {
    getAttrs(["knowledgedice", "knowledgepip"], function(values) {
        setAttrs({
            Businessdice: +values.knowledgedice, 
            Businesspip: +values.knowledgepip
        });
    });
});
on("change:demolitions_update", function() {
    getAttrs(["knowledgedice", "knowledgepip"], function(values) {
        setAttrs({
            demolitionsdice: +values.knowledgedice, 
            demolitionspip: +values.knowledgepip
        });
    });
});
on("change:forgery_update", function() {
    getAttrs(["knowledgedice", "knowledgepip"], function(values) {
        setAttrs({
            forgerydice: +values.knowledgedice, 
            forgerypip: +values.knowledgepip
        });
    });
});
on("change:languages_update", function() {
    getAttrs(["knowledgedice", "knowledgepip"], function(values) {
        setAttrs({
            languagesdice: +values.knowledgedice, 
            languagespip: +values.knowledgepip
        });
    });
});
on("change:medicine_update", function() {
    getAttrs(["knowledgedice", "knowledgepip"], function(values) {
        setAttrs({
            medicinedice: +values.knowledgedice, 
            medicinepip: +values.knowledgepip
        });
    });
});
on("change:Navigation_update", function() {
    getAttrs(["knowledgedice", "knowledgepip"], function(values) {
        setAttrs({
            Navigationdice: +values.knowledgedice, 
            Navigationpip: +values.knowledgepip
        });
    });
});
on("change:scholar_update", function() {
    getAttrs(["knowledgedice", "knowledgepip"], function(values) {
        setAttrs({
            scholardice: +values.knowledgedice, 
            scholarpip: +values.knowledgepip
        });
    });
});
on("change:Security_update", function() {
    getAttrs(["knowledgedice", "knowledgepip"], function(values) {
        setAttrs({
            Securitydice: +values.knowledgedice,
            Securitypip: +values.knowledgepip
        });
    });
});
on("change:Tech_update", function() {
    getAttrs(["knowledgedice", "knowledgepip"], function(values) {
        setAttrs({
            Techdice: +values.knowledgedice,
            Techpip: +values.knowledgepip
        });
    });
});
on("change:repeating_knowledgeskills:knowskill_update", function() {
    getAttrs(["knowledgedice", "knowledgepip"], function(values) {
        setAttrs({
            repeating_knowledgeskills_knowskilldice: +values.knowledgedice, 
            repeating_knowledgeskills_knowskillpip: +values.knowledgepip
        });
    });
});
    // Perception perception_update
on("change:perception_update", function() {
    getAttrs(["perceptiondice", "perceptionpip"], function(values) {
        setAttrs({
            artistdice: +values.perceptiondice, 
            artistpip: +values.perceptionpip,
            gamblingdice: +values.perceptiondice, 
            gamblingpip: +values.perceptionpip,
            hidedice: +values.perceptiondice, 
            hidepip: +values.perceptionpip,
            investigationdice: +values.perceptiondice, 
            investigationpip: +values.perceptionpip,

            Repairdice: +values.perceptiondice, 
            Repairpip: +values.perceptionpip,

            Persuasiondice: +values.perceptiondice, 
            Persuasionpip: +values.perceptionpip,
            searchdice: +values.perceptiondice, 
            searchpip: +values.perceptionpip,

            streetwisedice: +values.perceptiondice, 
            streetwisepip: +values.perceptionpip,
            survivaldice: +values.perceptiondice, 
            survivalpip: +values.perceptionpip,

            Trackingdice: +values.perceptiondice, 
            Trackingpip: +values.perceptionpip,
            repeating_Perceptionskills_perskilldice: +values.perceptiondice, 
            repeating_Perceptionskills_perskillpip: +values.perceptionpip
        });
    });
});
on("change:artist_update", function() {
    getAttrs(["perceptiondice", "perceptionpip"], function(values) {
        setAttrs({
            artistdice: +values.perceptiondice, 
            artistpip: +values.perceptionpip
        });
    });
});
on("change:gambling_update", function() {
    getAttrs(["perceptiondice", "perceptionpip"], function(values) {
        setAttrs({
            gamblingdice: +values.perceptiondice, 
            gamblingpip: +values.perceptionpip
        });
    });
});
on("change:hide_update", function() {
    getAttrs(["perceptiondice", "perceptionpip"], function(values) {
        setAttrs({
            hidedice: +values.perceptiondice, 
            hidepip: +values.perceptionpip
        });
    });
});
on("change:investigation_update", function() {
    getAttrs(["perceptiondice", "perceptionpip"], function(values) {
        setAttrs({
            investigationdice: +values.perceptiondice, 
            investigationpip: +values.perceptionpip
        });
    });
});

on("change:repair_update", function() {
    getAttrs(["perceptiondice", "perceptionpip"], function(values) {
        setAttrs({
            repairdice: +values.perceptiondice, 
            repairpip: +values.perceptionpip
        });
    });
});

on("change:Persuasion_update", function() {
    getAttrs(["perceptiondice", "perceptionpip"], function(values) {
        setAttrs({
            Persuasiondice: +values.perceptiondice, 
            Persuasionpip: +values.perceptionpip
        });
    });
});
on("change:search_update", function() {
    getAttrs(["perceptiondice", "perceptionpip"], function(values) {
        setAttrs({
            searchdice: +values.perceptiondice, 
            searchpip: +values.perceptionpip
        });
    });
});
on("change:streetwise_update", function() {
    getAttrs(["perceptiondice", "perceptionpip"], function(values) {
        setAttrs({
            streetwisedice: +values.perceptiondice, 
            streetwisepip: +values.perceptionpip
        });
    });
});
on("change:survival_update", function() {
    getAttrs(["perceptiondice", "perceptionpip"], function(values) {
        setAttrs({
            survivaldice: +values.perceptiondice, 
            survivalpip: +values.perceptionpip
        });
    });
});
on("change:Tracking_update", function() {
    getAttrs(["perceptiondice", "perceptionpip"], function(values) {
        setAttrs({
            Trackingdice: +values.perceptiondice, 
            Trackingpip: +values.perceptionpip
        });
    });
});
on("change:repeating_Perceptionskills:perskill_update", function() {
    getAttrs(["perceptiondice", "perceptionpip"], function(values) {
        setAttrs({
            repeating_Perceptionskills_perskilldice: +values.perceptiondice, 
            repeating_Perceptionskills_perskillpip: +values.perceptionpip
        });
    });
});
    // Physique Physique_update
on("change:Physique_update", function() {
    getAttrs(["Physiquedice", "Physiquepip"], function(values) {
        setAttrs({
            climbdice: +values.Physiquedice, 
            climbpip: +values.Physiquepip,
            liftdice: +values.Physiquedice, 
            liftpip: +values.Physiquepip,
            runningdice: +values.Physiquedice, 
            runningpip: +values.Physiquepip,
            staminadice: +values.Physiquedice, 
            staminapip: +values.Physiquepip,
            swimdice: +values.Physiquedice, 
            swimpip: +values.Physiquepip,
            repeating_Physiqueskills_strskilldice: +values.Physiquedice, 
            repeating_Physiqueskills_strskillpip: +values.Physiquepip
        });
    });
});
on("change:climb_update", function() {
    getAttrs(["Physiquedice", "Physiquepip"], function(values) {
        setAttrs({
            climbdice: +values.Physiquedice, 
            climbpip: +values.Physiquepip
        });
    });
});
on("change:lift_update", function() {
    getAttrs(["Physiquedice", "Physiquepip"], function(values) {
        setAttrs({
            liftdice: +values.Physiquedice, 
            liftpip: +values.Physiquepip
        });
    });
});
on("change:running_update", function() {
    getAttrs(["Physiquedice", "Physiquepip"], function(values) {
        setAttrs({
            runningdice: +values.Physiquedice, 
            runningpip: +values.Physiquepip
        });
    });
});
on("change:stamina_update", function() {
    getAttrs(["Physiquedice", "Physiquepip"], function(values) {
        setAttrs({
            staminadice: +values.Physiquedice, 
            staminapip: +values.Physiquepip
        });
    });
});
on("change:swim_update", function() {
    getAttrs(["Physiquedice", "Physiquepip"], function(values) {
        setAttrs({
            swimdice: +values.Physiquedice, 
            swimpip: +values.Physiquepip
        });
    });
});
on("change:repeating_Physiqueskills:strskill_update", function() {
    getAttrs(["Physiquedice", "Physiquepip"], function(values) {
        setAttrs({
            repeating_Physiqueskills_strskilldice: +values.Physiquedice, 
            repeating_Physiqueskills_agilskillpip: +values.Physiquepip
        });
    });
});
    // Reflexes Reflexes_update
on("change:Reflexes_update", function() {
    getAttrs(["Reflexesdice", "Reflexespip"], function(values) {
        setAttrs({
            acrobaticsdice: +values.Reflexesdice, 
            acrobaticspip: +values.Reflexespip,
            acrobaticsdice: +values.Reflexesdice, 
            acrobaticspip: +values.Reflexespip,
            brawlingdice: +values.Reflexesdice, 
            brawlingpip: +values.Reflexespip,
            dodgedice: +values.Reflexesdice, 
            dodgepip: +values.Reflexespip,
            flyingdice: +values.Reflexesdice, 
            flyingpip: +values.Reflexespip,
            flyingdice: +values.Reflexesdice, 
            flyingpip: +values.Reflexespip,
            meleedice: +values.Reflexesdice, 
            meleepip: +values.Reflexespip,
            ridingdice: +values.Reflexesdice, 
            ridingpip: +values.Reflexespip,
            sneakdice: +values.Reflexesdice, 
            sneakpip: +values.Reflexespip,
            repeating_Reflexesskills_agilskilldice: +values.Reflexesdice, 
            repeating_Reflexesskills_agilskillpip: +values.Reflexespip
        });
    });
});
on("change:acrobatics_update", function() {
    getAttrs(["Reflexesdice", "Reflexespip"], function(values) {
        setAttrs({
            acrobaticsdice: +values.Reflexesdice, 
            acrobaticspip: +values.Reflexespip
        });
    });
});
on("change:brawling_update", function() {
    getAttrs(["Reflexesdice", "Reflexespip"], function(values) {
        setAttrs({
            brawlingdice: +values.Reflexesdice, 
            brawlingpip: +values.Reflexespip
        });
    });
});
on("change:dodge_update", function() {
    getAttrs(["Reflexesdice", "Reflexespip"], function(values) {
        setAttrs({
            dodgedice: +values.Reflexesdice, 
            dodgepip: +values.Reflexespip
        });
    });
});
on("change:flying_update", function() {
    getAttrs(["Reflexesdice", "Reflexespip"], function(values) {
        setAttrs({
            flyingdice: +values.Reflexesdice, 
            flyingpip: +values.Reflexespip
        });
    });
});
on("change:melee_update", function() {
    getAttrs(["Reflexesdice", "Reflexespip"], function(values) {
        setAttrs({
            meleedice: +values.Reflexesdice, 
            meleepip: +values.Reflexespip
        });
    });
});
on("change:riding_update", function() {
    getAttrs(["Reflexesdice", "Reflexespip"], function(values) {
        setAttrs({
            ridingdice: +values.Reflexesdice, 
            ridingpip: +values.Reflexespip
        });
    });
});
on("change:sneak_update", function() {
    getAttrs(["Reflexesdice", "Reflexespip"], function(values) {
        setAttrs({
            sneakdice: +values.Reflexesdice,
            sneakpip: +values.Reflexespip
        });
    });
});
on("change:repeating_Reflexesskills:agilskill_update", function() {
    getAttrs(["Reflexesdice", "Reflexespip"], function(values) {
        setAttrs({
            repeating_Reflexesskills_agilskilldice: +values.Reflexesdice, 
            repeating_Reflexesskills_agilskillpip: +values.Reflexespip
        });
    });
});
    // Mass Calc
    // weapon wgt
on("change:repeating_weapons:weapon_subwgt change:repeating_weapons:weapon_carried", function() {
    getAttrs(["repeating_weapons_weapon_subwgt", "repeating_weapons_weapon_carried"], function(values) {
        setAttrs({
            repeating_weapons_weapon_wgt: +values.repeating_weapons_weapon_subwgt * +values.repeating_weapons_weapon_carried
        });
    });
});
    //Armor wgt
on("change:repeating_armor:Armor_subwgt change:repeating_armor:Armor_carried", function() {
    getAttrs(["repeating_armor_Armor_subwgt", "repeating_armor_Armor_carried"], function(values) {
        setAttrs({
            repeating_armor_Armor_wgt: +values.repeating_armor_Armor_subwgt * +values.repeating_armor_Armor_carried
        });
    });
});
    //Other equip wgt part 1
on("change:repeating_otherequip:otherequip_wgt change:repeating_otherequip:otherequip_amt", function() {
    getAttrs(["repeating_otherequip_otherequip_wgt", "repeating_otherequip_otherequip_amt"], function(values) {
        setAttrs({
            repeating_otherequip_otherequip_subtotal: +values.repeating_otherequip_otherequip_wgt * +values.repeating_otherequip_otherequip_amt
        });
    });
});
    //Other equip wgt part 2
on("change:repeating_otherequip:otherequip_subtotal change:repeating_otherequip:otherequip_carried", function() {
    getAttrs(["repeating_otherequip_otherequip_subtotal", "repeating_otherequip_otherequip_carried"], function(values) {
        setAttrs({
            repeating_otherequip_otherequip_total: +values.repeating_otherequip_otherequip_subtotal * +values.repeating_otherequip_otherequip_carried
        });
    });
});
    //Wound effect 
on("change:injury change:stunned sheet:opened", function() {
    getAttrs(["injury","stunned"], function(values) { 

        if (values.injury == 0) {
            setAttrs({ 
                wound_effects: 0 - +values.stunned,
                wound_level: 'Uninjured'
            })
        }
        else if (values.injury == 1) {
            setAttrs({ 
                wound_effects: -1 - +values.stunned,
                wound_level: 'Wounded'
            })
        }
        else if (values.injury == 2) {
            setAttrs({ 
                wound_effects: -2 - +values.stunned,
                wound_level: 'Severely Wounded'
            })
        }
        else if (values.injury == 3) {
            setAttrs({ 
                wound_effects: -3 - +values.stunned,
                wound_level: 'Incapacitated'
            })
        }
        else if (values.injury == 4) {
            setAttrs({ 
                wound_effects: -99 - +values.stunned,
                wound_level: 'Mortally Wounded'
            })
        }
        else if (values.injury == 5) {
            setAttrs({ 
                wound_effects: -999 - +values.stunned,
                wound_level: 'Dead'
            })
        }
          else {
      		setAttrs({
                wound_effects: 0
            });
      	}
    });
});  
    //injury Switches   
on("change:wound_up", function() {
    getAttrs(["wound_up", "injury"], function(values) {
        setAttrs({
            injury: Math.max(Math.min(parseInt(values.injury, 10) + 1, 5), 0)
        });
    });
});
on("change:wound_down", function() {
    getAttrs(["wound_down", "injury"], function(values) {
        setAttrs({
            injury: Math.max(Math.min(parseInt(values.injury, 10) - 1, 5), 0)
        });
    });
});
    //
on("change:Physiquedice change:Physiquepip", function() {
    getAttrs(["Physiquedice", "Physiquepip"], function(values) {
        setAttrs({
            liftdice: values.Physiquedice,
            liftpip: values.Physiquepip,
        });
    });
});
    //
on("change:liftdice", function() {
    getAttrs(["liftdice"], function(values) {
        setAttrs({
            PhysiqueDamage: Math.max(Math.min(parseInt((values.liftdice)/2, 10) + 0, 99), 0)
        });
    });
});
    //Skill Select For Weapons 
on("change:weapon_skill_select sheet:opened", function() {
    getAttrs(["weapon_skill_select","brawlingdice", "brawlingpip", "dodgedice", "dodgepip", "Marksmanshipdice", "Marksmanshippip", "Commanddice", "Commandpip", "meleedice", "meleepip", "missiledice", "missilepip", "throwingdice", "throwingpip"], function(values) { 

        if (values.weapon_skill_select == 0) {
            setAttrs({ 
                attackdice: 0,
                attackpip: 0
            })
        }
        else if (values.weapon_skill_select == 1) {
            setAttrs({ 
                attackdice: values.brawlingdice,
                attackpip: values.brawlingpip
            })
        }
        else if (values.weapon_skill_select == 2) {
            setAttrs({ 
                attackdice: values.dodgedice,
                attackpip: values.dodgepip
            })
        }
        else if (values.weapon_skill_select == 3) {
            setAttrs({ 
                attackdice: values.Marksmanshipdice,
                attackpip: values.Marksmanshippip
            })
        }
        else if (values.weapon_skill_select == 4) {
            setAttrs({ 
                attackdice: values.meleedice,
                attackpip: values.meleepip
            })
        }
        else if (values.weapon_skill_select == 5) {
            setAttrs({ 
                attackdice: values.missiledice,
                attackpip: values.missilepip
            })
        }
        else if (values.weapon_skill_select == 6) {
            setAttrs({ 
                attackdice: values.throwingdice,
                attackpip: values.throwingpip
            })
        }
        else if (values.weapon_skill_select == 7) {
            setAttrs({ 
                attackdice: values.Commanddice,
                attackpip: values.Commandpip
            })
        }
          else {
      		setAttrs({
                attackdice: 0,
                attackpip: 0
            });
      	}
    });
});
    //Skill Select For repeating Weapons 
on("change:repeating_weapons:weapon_skill_select sheet:opened", function() {
    getAttrs(["repeating_weapons_weapon_skill_select","brawlingdice", "brawlingpip", "dodgedice", "dodgepip", "Marksmanshipdice", "Marksmanshippip", "Commanddice", "Commandpip", "meleedice", "meleepip", "missiledice", "missilepip", "throwingdice", "throwingpip"], function(values) { 

        if (values.repeating_weapons_weapon_skill_select == 0) {
            setAttrs({ 
                repeating_weapons_attackdice: 0,
                repeating_weapons_attackpip: 0
            })
        }
        else if (values.repeating_weapons_weapon_skill_select == 1) {
            setAttrs({ 
                repeating_weapons_attackdice: values.brawlingdice,
                repeating_weapons_attackpip: values.brawlingpip
            })
        }
        else if (values.repeating_weapons_weapon_skill_select == 2) {
            setAttrs({ 
                repeating_weapons_attackdice: values.dodgedice,
                repeating_weapons_attackpip: values.dodgepip
            })
        }
        else if (values.repeating_weapons_weapon_skill_select == 3) {
            setAttrs({ 
                repeating_weapons_attackdice: values.Marksmanshipdice,
                repeating_weapons_attackpip: values.Marksmanshippip
            })
        }
        else if (values.weapon_repeating_weapons_weapon_skill_selectskill_select == 4) {
            setAttrs({ 
                repeating_weapons_attackdice: values.meleedice,
                repeating_weapons_attackpip: values.meleepip
            })
        }
        else if (values.repeating_weapons_weapon_skill_select == 5) {
            setAttrs({ 
                repeating_weapons_attackdice: values.missiledice,
                repeating_weapons_attackpip: values.missilepip
            })
        }
        else if (values.repeating_weapons_weapon_skill_select == 6) {
            setAttrs({ 
                repeating_weapons_attackdice: values.throwingdice,
                repeating_weapons_attackpip: values.throwingpip
            })
        }
        else if (values.repeating_weapons_weapon_skill_select == 7) {
            setAttrs({ 
                repeating_weapons_attackdice: values.Commanddice,
                repeating_weapons_attackpip: values.Commandgpip
            })
        }
          else {
      		setAttrs({
                repeating_weapons_attackdice: 0,
                repeating_weapons_attackpip: 0
            });
      	}
    });
});
    //Skill Select For repeating Vehicle Weapons 
on("change:repeating_vweapon:vweapon_skill_select sheet:opened", function() {
    getAttrs(["repeating_vweapon_vweapon_skill_select","brawlingdice", "brawlingpip", "dodgedice", "dodgepip", "Marksmanshipdice", "Marksmanshippip", "Commanddice", "Commandpip", "meleedice", "meleepip", "missiledice", "missilepip", "throwingdice", "throwingpip"], function(values) { 

        if (values.repeating_vweapon_vweapon_skill_select == 0) {
            setAttrs({ 
                repeating_vweapon_vattackdice: 0,
                repeating_vweapon_vattackpip: 0
            })
        }
        else if (values.repeating_vweapon_vweapon_skill_select == 1) {
            setAttrs({ 
                repeating_vweapon_vattackdice: values.brawlingdice,
                repeating_vweapon_vattackpip: values.brawlingpip
            })
        }
        else if (values.repeating_vweapon_vweapon_skill_select == 2) {
            setAttrs({ 
                repeating_vweapon_vattackdice: values.dodgedice,
                repeating_vweapon_vattackpip: values.dodgepip
            })
        }
        else if (values.repeating_vweapon_vweapon_skill_select == 3) {
            setAttrs({ 
                repeating_vweapon_vattackdice: values.Marksmanshipdice,
                repeating_vweapon_vattackpip: values.Marksmanshippip
            })
        }
        else if (values.repeating_vweapon_vweapon_skill_select == 4) {
            setAttrs({ 
                repeating_vweapon_vattackdice: values.meleedice,
                repeating_vweapon_vattackpip: values.meleepip
            })
        }
        else if (values.repeating_vweapon_vweapon_skill_select == 5) {
            setAttrs({ 
                repeating_vweapon_vattackdice: values.missiledice,
                repeating_vweapon_vattackpip: values.missilepip
            })
        }
        else if (values.repeating_vweapon_vweapon_skill_select == 6) {
            setAttrs({ 
                repeating_vweapon_vattackdice: values.throwingdice,
                repeating_vweapon_vattackpip: values.throwingpip
            })
        }
        else if (values.repeating_vweapon_vweapon_skill_select == 7) {
            setAttrs({ 
                repeating_vweapon_vattackdice: values.Commanddice,
                repeating_vweapon_vattackpip: values.Commandpip
            })
        }
          else {
      		setAttrs({
                repeating_vweapon_vattackdice: 0,
                repeating_vweapon_vattackpip: 0
            });
      	}
    });
});
    //Skill Select For Vehicle Weapons 
on("change:vweapon_skill_select sheet:opened", function() {
    getAttrs(["vweapon_skill_select","brawlingdice", "brawlingpip", "dodgedice", "dodgepip", "Marksmanshipdice", "Marksmanshippip", "Commanddice", "Commandpip", "meleedice", "meleepip", "missiledice", "missilepip", "throwingdice", "throwingpip"], function(values) { 

        if (values.vweapon_skill_select == 0) {
            setAttrs({ 
                vattackdice: 0,
                vattackpip: 0
            })
        }
        else if (values.vweapon_skill_select == 1) {
            setAttrs({ 
                vattackdice: values.brawlingdice,
                vattackpip: values.brawlingpip
            })
        }
        else if (values.vweapon_skill_select == 2) {
            setAttrs({ 
                vattackdice: values.dodgedice,
                vattackpip: values.dodgepip
            })
        }
        else if (values.vweapon_skill_select == 3) {
            setAttrs({ 
                vattackdice: values.Marksmanshipdice,
                vattackpip: values.Marksmanshippip
            })
        }
        else if (values.vweapon_skill_select == 4) {
            setAttrs({ 
                vattackdice: values.meleedice,
                vattackpip: values.meleepip
            })
        }
        else if (values.vweapon_skill_select == 5) {
            setAttrs({ 
                vattackdice: values.missiledice,
                vattackpip: values.missilepip
            })
        }
        else if (values.vweapon_skill_select == 6) {
            setAttrs({ 
                vattackdice: values.throwingdice,
                vattackpip: values.throwingpip
            })
        }
          else {
      		setAttrs({
                vattackdice: 0,
                vattackpip: 0
            });
      	}
    });
});
    //Skill Select For Pilot 
on("change:repeating_pilot:pilot_skill_select sheet:opened", function() {
    getAttrs(["repeating_pilot_pilot_skill_select","Charmdice", "Charmpip", "navigationdice", "navigationpip", "pilotingdice", "pilotingpip", "Persuasiondice", "Persuasionpip", "Willpowerdice", "Willpowerpip"], function(values) { 
      
        if (values.repeating_pilot_pilot_skill_select == ['Navigation']) {
            setAttrs({ 
                repeating_pilot_vehicleskilldice: values.navigationdice,
                repeating_pilot_vehicleskillpip: values.navigationpip
            })
        }
        else if (values.repeating_pilot_pilot_skill_select == ['Piloting']) {
            setAttrs({ 
                repeating_pilot_vehicleskilldice: values.pilotingdice,
                repeating_pilot_vehicleskillpip: values.pilotingpip
            })
        }
          else {
      		setAttrs({
                repeating_vweapon_vattackdice: 0,
                repeating_vweapon_vattackpip: 0
            });
      	}
    });
});
    /* ---- BEGIN: TheAaronSheet.js ---- */
var TAS = TAS || (function(){
    'use strict';

    var version = '0.2.3',
        lastUpdate = 1457098056,

        loggingSettings = {
            debug: {
                key:     'debug',
                title:   'DEBUG',
                color: {
                    bgLabel: '#7732A2',
                    label:   '#F2EF40',
                    bgText:  '#FFFEB7',
                    text:    '#7732A2'
                }
            },
            error: {
                key:     'error',
                title:   'Error',
                color: {
                    bgLabel: '#C11713',
                    label:   'white',
                    bgText:  '#C11713',
                    text:    'white'
                }
            },
            warn: {
                key:     'warn',
                title:   'Warning',
                color: {
                    bgLabel: '#F29140',
                    label:   'white',
                    bgText:  '#FFD8B7',
                    text:    'black'
                }
            },
            info: {
                key:     'info',
                title:   'Info',
                color: {
                    bgLabel: '#413FA9',
                    label:   'white',
                    bgText:  '#B3B2EB',
                    text:    'black'
                }
            },
            notice: {
                key:     'notice',
                title:   'Notice',
                color: {
                    bgLabel: '#33C133',
                    label:   'white',
                    bgText:  '#ADF1AD',
                    text:    'black'
                }
            },
            log: {
                key:     'log',
                title:   'Log',
                color: {
                    bgLabel: '#f2f240',
                    label:   'black',
                    bgText:  '#ffff90',
                    text:    'black'
                }
            },
            callstack: {
                key:     'TAS',
                title:   'function',
                color: {
                    bgLabel: '#413FA9',
                    label:   'white',
                    bgText:  '#B3B2EB',
                    text:    'black'
                }
            },
            callstack_async: {
                key:     'TAS',
                title:   'ASYNC CALL',
                color: {
                    bgLabel: '#413FA9',
                    label:   'white',
                    bgText:  '#413FA9',
                    text:    'white'
                }
            },
            TAS: {
                key:     'TAS',
                title:   'TAS',
                color: {
                    bgLabel: 'grey',
                    label:   'black;background:linear-gradient(#304352,#d7d2cc,#d7d2cc,#d7d2cc,#304352)',
                    bgText:  'grey',
                    text:    'black;background:linear-gradient(#304352,#d7d2cc,#d7d2cc,#d7d2cc,#304352)'
                }
            }
        },


        config = {
            debugMode: false,
            logging: {
                log: true,
                notice: true,
                info: true,
                warn: true,
                error: true,
                debug: false
            }
        },

        callstackRegistry = [],
		queuedUpdates = {}, //< Used for delaying saves till the last momment.

    complexType = function(o){
        switch(typeof o){
            case 'string':
                return 'string';
            case 'boolean':
                return 'boolean';
            case 'number':
                return (_.isNaN(o) ? 'NaN' : (o.toString().match(/\./) ? 'decimal' : 'integer'));
            case 'function':
                return 'function: '+(o.name ? o.name+'()' : '(anonymous)');
            case 'object':
                return (_.isArray(o) ? 'array' : (_.isArguments(o) ? 'arguments' : ( _.isNull(o) ? 'null' : 'object')));
            default:
                return typeof o;
        }
    },

	dataLogger = function(primaryLogger,secondaryLogger,data){
        _.each(data,function(m){
            var type = complexType(m);
            switch(type){
                case 'string':
                    primaryLogger(m);
                    break;
                case 'undefined':
                case 'null':
                case 'NaN':
                    primaryLogger('['+type+']');
                    break;
                case 'number':
                case 'not a number':
                case 'integer':
                case 'decimal':
                case 'boolean':
                    primaryLogger('['+type+']: '+m);
                    break;
                default:
                    primaryLogger('['+type+']:=========================================');
                    secondaryLogger(m);
                    primaryLogger('=========================================================');
                    break;
            }
        });
	},


    colorLog = function(options){
        var coloredLoggerFunction,
            key = options.key,
            label = options.title || 'TAS',
            lBGColor = (options.color && options.color.bgLabel) || 'blue',
            lTxtColor = (options.color && options.color.label) || 'white',
            mBGColor = (options.color && options.color.bgText) || 'blue',
            mTxtColor = (options.color && options.color.text) || 'white';

        coloredLoggerFunction = function(message){
            console.log(
                '%c '+label+': %c '+message + ' ',
                'background-color: '+lBGColor+';color: '+lTxtColor+'; font-weight:bold;',
                'background-color: '+mBGColor+';color: '+mTxtColor+';'
            ); 
        };
        return function(){
            if('TAS'===key || config.logging[key]){
               dataLogger(coloredLoggerFunction,function(m){console.log(m);},_.toArray(arguments)); 
            }
        };
    },

    logDebug  = colorLog(loggingSettings.debug),
    logError  = colorLog(loggingSettings.error),
    logWarn   = colorLog(loggingSettings.warn),
    logInfo   = colorLog(loggingSettings.info),
    logNotice = colorLog(loggingSettings.notice),
    logLog    = colorLog(loggingSettings.log),
    log       = colorLog(loggingSettings.TAS),
    logCS     = colorLog(loggingSettings.callstack),
    logCSA    = colorLog(loggingSettings.callstack_async),

    registerCallstack = function(callstack,label){
        var idx=_.findIndex(callstackRegistry,function(o){
            return (_.difference(o.stack,callstack).length === _.difference(callstack,o.stack).length) &&
                _.difference(o.stack,callstack).length === 0 &&
                o.label === label;
        });
        if(-1 === idx){
            idx=callstackRegistry.length;
            callstackRegistry.push({
                stack: callstack,
                label: label
            });
        }
        return idx;
    },

    setConfigOption = function(options){
        var newconf =_.defaults(options,config);
        newconf.logging=_.defaults(
            (options && options.logging)||{},
            config.logging
        );
        config=newconf;
    },
    
    debugMode = function(){
        config.logging.debug=true;
        config.debugMode = true;
    },

    getCallstack = function(){
        var e = new Error('dummy'),
            stack = _.map(_.rest(e.stack.replace(/^[^\(]+?[\n$]/gm, '')
            .replace(/^\s+at\s+/gm, '')
            .replace(/^Object.<anonymous>\s*\(/gm, '{anonymous}()@')
            .split('\n')),function(l){
                return l.replace(/\s+.*$/,'');
            });
        return stack;
    },
    logCallstackSub = function(cs){
        var matches, csa;
        _.find(cs,function(line){
            matches = line.match(/TAS_CALLSTACK_(\d+)/);
            if(matches){
               csa=callstackRegistry[matches[1]];
               logCSA( '===================='+(csa.label ? '> '+csa.label+' <' : '')+'====================');
               logCallstackSub(csa.stack);
               return true;
            } 
            logCS(line);
            return false;
        });
    },
    logCallstack = function(){
        var cs;
        if(config.debugMode){
            cs = getCallstack();
            cs.shift();
            log('==============================> CALLSTACK <==============================');
            logCallstackSub(cs);
            log('=========================================================================');
        }
    },


    wrapCallback = function (label, callback, context){
        var callstack;
        if('function' === typeof label){
            context=callback;
            callback=label;
            label=undefined;
        }
        if(!config.debugMode){
            return (function(cb,ctx){
                return function(){
                    cb.apply(ctx||{},arguments);
                };
            }(callback,context));
        }
        
        callstack = getCallstack();
        callstack.shift();
        
        return (function(cb,ctx,cs,lbl){
            var ctxref=registerCallstack(cs,lbl);

            /*jshint -W054 */
            return new Function('cb','ctx','TASlog',
                "return function TAS_CALLSTACK_"+ctxref+"(){"+
                    "TASlog('Entering: '+(cb.name||'(anonymous function)'));"+
                    "cb.apply(ctx||{},arguments);"+
                    "TASlog('Exiting: '+(cb.name||'(anonymous function)'));"+
                "};")(cb,ctx,log);
            /*jshint +W054 */
        }(callback,context,callstack,label));
    },


    prepareUpdate = function( attribute, value ){
        queuedUpdates[attribute]=value;
    },

    applyQueuedUpdates = function() {
      setAttrs(queuedUpdates);
      queuedUpdates = {};
    },

	namesFromArgs = function(args,base){
        return _.chain(args)
            .reduce(function(memo,attr){
                if('string' === typeof attr) {
                    memo.push(attr);
                } else if(_.isArray(args) || _.isArguments(args)){
                    memo = namesFromArgs(attr,memo);
                }
                return memo;
            },(_.isArray(base) && base) || [])
            .uniq()
            .value();
	},

	addId = function(obj,value){
		Object.defineProperty(obj,'id',{
			value: value,
			writeable: false,
			enumerable: false
		});
	},

	addProp = function(obj,prop,value,fullname){
		(function(){
            var pname=(_.contains(['S','F','I','D'],prop) ? '_'+prop : prop),
			    full_pname = fullname || prop,
                pvalue=value;

            _.each(['S','I','F'],function(p){
                if( !_.has(obj,p)){
                    Object.defineProperty(obj, p, {
                        value: {},
                        enumerable: false,
                        readonly: true
                    });
                }
            });
            if( !_.has(obj,'D')){
                Object.defineProperty(obj, 'D', {
                    value: _.reduce(_.range(10),function(m,d){
                            Object.defineProperty(m, d, {
                                value: {},
                                enumerable: true,
                                readonly: true
                            });
                            return m;
                        },{}),
                    enumerable: false,
                    readonly: true
                });
            }


            // Raw value
			Object.defineProperty(obj, pname, {
                enumerable: true,
				set: function(v){
                    if(v!==pvalue) {
                        pvalue=v;
                        prepareUpdate(full_pname,v);
                    }
				},
				get: function(){
					return pvalue;
				}
			});
            
            // string value
			Object.defineProperty(obj.S, pname, {
                enumerable: true,
				set: function(v){
                    var val=v.toString();
                    if(val !== pvalue) {
                        pvalue=val;
                        prepareUpdate(full_pname,val);
                    }
				},
				get: function(){
					return pvalue.toString();
				}
			});

            // int value
			Object.defineProperty(obj.I, pname, {
                enumerable: true,
				set: function(v){
                    var val=parseInt(v,10) || 0;
                    if(val !== pvalue){
                        pvalue=val;
                        prepareUpdate(full_pname,val);
                    }
				},
				get: function(){
					return parseInt(pvalue,10) || 0;
				}
			});

            // float value
			Object.defineProperty(obj.F, pname, {
                enumerable: true,
				set: function(v){
                    var val=parseFloat(v) || 0;
                    if(val !== pvalue) {
                        pvalue=val;
                        prepareUpdate(full_pname,val);
                    }
				},
				get: function(){
					return parseFloat(pvalue) || 0;
				}
			});
            _.each(_.range(10),function(d){
                Object.defineProperty(obj.D[d], pname, {
                    enumerable: true,
                    set: function(v){
                        var val=(parseFloat(v) || 0).toFixed(d);
                        if(val !== pvalue){
                            pvalue=val;
                            prepareUpdate(full_pname,val);
                        }
                    },
                    get: function(){
                        return (parseFloat(pvalue) || 0).toFixed(d);
                    }
                });
            });

		}());
	},
	
	repeating = function( section ) {
		return (function(s){
			var sectionName = s,
				attrNames = [],
				fieldNames = [],
				operations = [],
                after = [],
			
			repAttrs = function TAS_Repeating_Attrs(){
				attrNames = namesFromArgs(arguments,attrNames);
				return this;
			},
			repFields = function TAS_Repeating_Fields(){
				fieldNames = namesFromArgs(arguments,fieldNames);
				return this;
			},
			repReduce = function TAS_Repeating_Reduce(func, initial, final, context) { 
				operations.push({
                    type: 'reduce',
                    func: (func && _.isFunction(func) && func) || _.noop,
                    memo: (_.isUndefined(initial) && 0) || initial,
                    final: (final && _.isFunction(final) && final) || _.noop,
                    context: context || {}
                });
				return this;
			},
			repMap = function TAS_Repeating_Map(func, final, context) {
				operations.push({
                    type: 'map',
                    func: (func && _.isFunction(func) && func) || _.noop,
                    final: (final && _.isFunction(final) && final) || _.noop,
                    context: context || {}
                });
				return this;
			},
            repEach = function TAS_Repeating_Each(func, final, context) {
				operations.push({
                    type: 'each',
                    func: (func && _.isFunction(func) && func) || _.noop,
                    final: (final && _.isFunction(final) && final) || _.noop,
                    context: context || {}
                });
				return this;
            },
            repTap = function TAS_Repeating_Tap(final, context) {
				operations.push({
                    type: 'tap',
                    final: (final && _.isFunction(final) && final) || _.noop,
                    context: context || {}
                });
				return this;
            },
            repAfter = function TAS_Repeating_After(callback,context) {
				after.push({
                    callback: (callback && _.isFunction(callback) && callback) || _.noop,
                    context: context || {}
                });
				return this;
            },
			repExecute = function TAS_Repeating_Execute(callback,context){
				var rowSet = {},
					attrSet = {},
					fieldIds = [],
					fullFieldNames = [];

                repAfter(callback,context);

				// call each operation per row.
				// call each operation's final
				getSectionIDs("repeating_"+sectionName,function(ids){
					fieldIds = ids;
					fullFieldNames = _.reduce(fieldIds,function(memo,id){
						return memo.concat(_.map(fieldNames,function(name){
							return 'repeating_'+sectionName+'_'+id+'_'+name;  
						}));
					},[]);
					getAttrs( _.uniq(attrNames.concat(fullFieldNames)), function(values){
						_.each(attrNames,function(aname){
							if(values.hasOwnProperty(aname)){
								addProp(attrSet,aname,values[aname]);
							}
						});

						rowSet = _.reduce(fieldIds,function(memo,id){
							var r={};
							addId(r,id);
							_.each(fieldNames,function(name){
								var fn = 'repeating_'+sectionName+'_'+id+'_'+name;  
								addProp(r,name,values[fn],fn);
							});

							memo[id]=r;

							return memo;
						},{});

                        _.each(operations,function(op){
                            var res;
                            switch(op.type){
                                case 'tap':
                                    _.bind(op.final,op.context,rowSet,attrSet)();
                                    break;

                                case 'each':
                                    _.each(rowSet,function(r){
                                        _.bind(op.func,op.context,r,attrSet,r.id,rowSet)();
                                    });
                                    _.bind(op.final,op.context,rowSet,attrSet)();
                                    break;

                                case 'map':
                                    res = _.map(rowSet,function(r){
                                        return _.bind(op.func,op.context,r,attrSet,r.id,rowSet)();
                                    });
                                    _.bind(op.final,op.context,res,rowSet,attrSet)();
                                    break;

                                case 'reduce':
                                    res = op.memo;
                                    _.each(rowSet,function(r){
                                        res = _.bind(op.func,op.context,res,r,attrSet,r.id,rowSet)();
                                    });
                                    _.bind(op.final,op.context,res,rowSet,attrSet)();
                                    break;
                            }
                        });

                        // finalize attrs
                        applyQueuedUpdates();
                        _.each(after,function(op){
                            _.bind(op.callback,op.context)();
                        });
					});
				});
			};
				
			return {
				attrs: repAttrs,
				attr: repAttrs,

				column: repFields,
				columns: repFields,
				field: repFields,
				fields: repFields,

				reduce: repReduce,
				inject: repReduce,
				foldl: repReduce,

				map: repMap,
				collect: repMap,

				each: repEach,
                forEach: repEach,

                tap: repTap,
                'do': repTap,

				after: repAfter,
				last: repAfter,
				done: repAfter,

				execute: repExecute,
				go: repExecute,
				run: repExecute
			};
		}(section));
	},


    repeatingSimpleSum = function(section, field, destination){
        repeating(section)
            .attr(destination)
            .field(field)
            .reduce(function(m,r){
                return m + (r.F[field]);
            },0,function(t,r,a){
                a.S[destination]=t;
            })
            .execute();
    };

	console.log('%c..*`*..*`*.  The Aaron Sheet  v'+version+'  .*`*..*`*..','background: linear-gradient(to right,green,white,white,green); color:black;text-shadow: 0 0 8px white;');
	console.log('%c..*`*..*`*.  Last update: '+(new Date(lastUpdate*1000))+'  .*`*..*`*..','background: linear-gradient(to right,green,white,white,green); color:black;text-shadow: 0 0 8px white;');


    return {
        /* Repeating Sections */
        repeatingSimpleSum: repeatingSimpleSum,
		repeating: repeating,

        /* Configuration */
        config: setConfigOption,

        /* Debugging */
        callback: wrapCallback,
        callstack: logCallstack,
        debugMode: debugMode,
        _fn: wrapCallback,

        /* Logging */
        debug: logDebug,
        error: logError,
        warn: logWarn,
        info: logInfo,
        notice: logNotice,
        log: logLog
    };
}());

/* ---- END: TheAaronSheet.js ---- */

on('change:repeating_xp sheet:opened', function(){
    TAS.repeatingSimpleSum('xp','cost','xp_spent_total');
});
on('change:repeating_Ads sheet:opened', function(){
    TAS.repeatingSimpleSum('Ads','advantage_pips','ad_total');
});
on('change:repeating_DisAds sheet:opened', function(){
    TAS.repeatingSimpleSum('DisAds','disadvantage_pips','disad_total');
});
on('change:repeating_SpAbil sheet:opened', function(){
    TAS.repeatingSimpleSum('SpAbil','specialAbilities_pips','specialad_total');
});
    // equip
on('change:repeating_otherequip sheet:opened', function(){
    TAS.repeatingSimpleSum('otherequip','otherequip_total','wgt_carried');
});
on('change:repeating_otherequip sheet:opened', function(){
    TAS.repeatingSimpleSum('otherequip','otherequip_subtotal','wgt_total');
});
    // Armor
on('change:repeating_armor sheet:opened', function(){
    TAS.repeatingSimpleSum('armor','Armor_wgt','Armor_wgt_carried');
});
on('change:repeating_armor sheet:opened', function(){
    TAS.repeatingSimpleSum('armor','Armor_subwgt','Armor_wgt_total');
});
    // weapon
on('change:repeating_weapons sheet:opened', function(){
    TAS.repeatingSimpleSum('weapons','weapon_wgt','weapon_wgt_carried');
});
on('change:repeating_weapons sheet:opened', function(){
    TAS.repeatingSimpleSum('weapons','weapon_subwgt','weapon_wgt_total');
});
</script>
